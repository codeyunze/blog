import{_ as a,e as i,f as n,o as e}from"./app-Cx_oisp2.js";const l="/assets/image-20250906221934294-BW14Cl3S.png",p="/assets/image-20250906222607460-MIL2ehWM.png",t="/assets/image-20250906222226007-DhZF7_AY.png",h="/assets/image-20250906222726588-BhFwPDfm.png",r="/assets/image-20250906222846379-B53vuLox.png",k="/assets/image-20250906223427632-VEUb4HGL.png",d="/assets/image-20250906223534799-HxpzM_jz.png",c="/assets/image-20250907083104785-BnlYARPw.png",o="/assets/image-20250906223748367-KUmhccz6.png",g="/assets/image-20250906223823669-BqAXSrYG.png",m="/assets/image-20250906223853914-DjMGnNav.png",A="/assets/image-20250907091124484-DAyPB8jf.png",D="/assets/image-20250907124805678-pJ5QgyP8.png",y={};function v(b,s){return e(),i("div",null,s[0]||(s[0]=[n('<p>RocketMQ消息中间件单机于集群模式详细部署操作手册</p><h2 id="部署单机rocketmq" tabindex="-1"><a class="header-anchor" href="#部署单机rocketmq"><span>部署单机rocketmq</span></a></h2><h3 id="解压缩包" tabindex="-1"><a class="header-anchor" href="#解压缩包"><span>解压缩包</span></a></h3><p><img src="'+l+'" alt="image-20250906221934294"></p><h3 id="调整启用脚本" tabindex="-1"><a class="header-anchor" href="#调整启用脚本"><span>调整启用脚本</span></a></h3><h4 id="runserver-sh" tabindex="-1"><a class="header-anchor" href="#runserver-sh"><span>runserver.sh</span></a></h4><p><img src="'+p+'" alt="image-20250906222607460"></p><p><img src="'+t+'" alt="image-20250906222226007"></p><h4 id="runbroker-sh" tabindex="-1"><a class="header-anchor" href="#runbroker-sh"><span>runbroker.sh</span></a></h4><p><img src="'+h+'" alt="image-20250906222726588"></p><p><img src="'+r+'" alt="image-20250906222846379"></p><h3 id="启动nameserver服务" tabindex="-1"><a class="header-anchor" href="#启动nameserver服务"><span>启动nameserver服务</span></a></h3><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nohup</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">bin/mqnamesrv</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&amp;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="'+k+'" alt="image-20250906223427632"></p><p>查看日志</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">tail</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-n</span><span class="space"> </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">10</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nohup.out</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="'+d+`" alt="image-20250906223534799"></p><p>启动成功</p><h3 id="配置环境变量" tabindex="-1"><a class="header-anchor" href="#配置环境变量"><span>配置环境变量</span></a></h3><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">编辑环境变量</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">vim</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/etc/profile</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">加载变量</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">source</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/etc/profile</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>添加nameserver服务的地址环境变量</p><p><img src="`+c+'" alt="image-20250907083104785"></p><h3 id="启动broker服务" tabindex="-1"><a class="header-anchor" href="#启动broker服务"><span>启动broker服务</span></a></h3><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nohup</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">bin/mqbroker</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&amp;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="'+o+'" alt="image-20250906223748367"></p><p>查看日志</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">tail</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-n</span><span class="space"> </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">10</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nohup.out</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="'+g+'" alt="image-20250906223823669"></p><p>启动成功</p><p><img src="'+m+'" alt="image-20250906223853914"></p><h3 id="测试验证" tabindex="-1"><a class="header-anchor" href="#测试验证"><span>测试验证</span></a></h3><p>发送消息</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">/opt/tools/rocketmq/rocketmq-all-5.3.0-bin-release/bin/tools.sh</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">org.apache.rocketmq.example.quickstart.Producer</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>消费消息</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">/opt/tools/rocketmq/rocketmq-all-5.3.0-bin-release/bin/tools.sh</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">org.apache.rocketmq.example.quickstart.Consumer</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="部署rocketmq-dashboard" tabindex="-1"><a class="header-anchor" href="#部署rocketmq-dashboard"><span>部署rocketmq-dashboard</span></a></h2><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">run</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-d</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">--name</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">rocketmq-dashboard</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-e</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">JAVA_OPTS=-Drocketmq.namesrv.addr=192.168.3.237:9876</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-p</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8082:8082</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-t</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">registry.cn-guangzhou.aliyuncs.com/devyunze/rocketmq-dashboard:2.1.0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>访问 http://ip:8082</p><p><img src="'+A+`" alt="image-20250907091124484"></p><h2 id="升级为分部署集群" tabindex="-1"><a class="header-anchor" href="#升级为分部署集群"><span>升级为分部署集群</span></a></h2><table><thead><tr><th>机器</th><th>服务名称</th><th>备注</th></tr></thead><tbody><tr><td>192.168.3.237（worker1）</td><td>nameserver-1</td><td>nameserver服务集群节点1</td></tr><tr><td>192.168.3.237（worker1）</td><td></td><td></td></tr><tr><td>192.168.3.237（worker1）</td><td></td><td></td></tr><tr><td>192.168.3.241（worker2）</td><td>nameserver-2</td><td>nameserver服务集群节点2</td></tr><tr><td>192.168.3.241（worker2）</td><td>broker-a-master</td><td>broker服务a节点（主）</td></tr><tr><td>192.168.3.241（worker2）</td><td>broker-b-slave</td><td>broker服务b节点（从）</td></tr><tr><td>192.168.3.248（worker3）</td><td>nameserver-3</td><td>nameserver服务集群节点3</td></tr><tr><td>192.168.3.248（worker3）</td><td>broker-b-master</td><td>broker服务b节点（主）</td></tr><tr><td>192.168.3.248（worker3）</td><td>broker-a-slave</td><td>broker服务a节点（从）</td></tr></tbody></table><p>确保此时服务器上没有正在运行的broker服务</p><h3 id="调整-worker2-的-broker-配置" tabindex="-1"><a class="header-anchor" href="#调整-worker2-的-broker-配置"><span>调整 worker2 的 broker 配置</span></a></h3><h4 id="broker-a-master节点" tabindex="-1"><a class="header-anchor" href="#broker-a-master节点"><span>broker-a-master节点</span></a></h4><p>配置路径：/opt/tools/rocketmq/rocketmq-all-5.3.0-bin-release/conf/2m-2s-async/broker-a.properties</p><p>配置信息如下</p><div class="language-properties line-numbers-mode" data-ext="properties" data-title="properties"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">broker集群的名称，名字一样的节点就在同一个集群内</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">brokerClusterName</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">VMCluster</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">主从节点的brokerName要保持一致，保证是同一份数据</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">brokerName</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">broker-a</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">brokerId为0的节点是master节点，大于0的就是slave节点</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">brokerId</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">0</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">nameServer服务地址，用“;”进行分割</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">namesrvAddr</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">192.168.3.237:9876</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">;192.168.3.241:9876;192.168.3.248:9876</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">deleteWhen</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">04</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">fileReservedTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">48</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">存储路径</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">storePathRootDir</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/opt/tools/rocketmq/store</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">storePathCommitLog</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/opt/tools/rocketmq/store/commitlog</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">storePathConsumeQueue</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/opt/tools/rocketmq/store/consumequeue</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">storePathIndex</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/opt/tools/rocketmq/store/index</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">storeCheckpoint</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/opt/tools/rocketmq/store/checkpoint</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">aborFile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/opt/tools/rocketmq/store/abort</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">broker角色，ASYNC_MASTER为主节点，SLAVE为从节点</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">brokerRole</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ASYNC_MASTER</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">flushDiskType</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ASYNC_FLUSH</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">服务端口</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">listenPort</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">10911</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="broker-b-slave节点" tabindex="-1"><a class="header-anchor" href="#broker-b-slave节点"><span>broker-b-slave节点</span></a></h4><p>配置路径：/opt/tools/rocketmq/rocketmq-all-5.3.0-bin-release/conf/2m-2s-async/broker-b-s.properties</p><p>配置信息如下</p><div class="language-properties line-numbers-mode" data-ext="properties" data-title="properties"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">broker集群的名称，名字一样的节点就在同一个集群内</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">brokerClusterName</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">VMCluster</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">主从节点的brokerName要保持一致，保证是同一份数据</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">brokerName</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">broker-b</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">brokerId为0的节点是master节点，大于0的就是slave节点</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">brokerId</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">1</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">nameServer服务地址，用“;”进行分割</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">namesrvAddr</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">192.168.3.237:9876</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">;192.168.3.241:9876;192.168.3.248:9876</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">deleteWhen</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">04</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">fileReservedTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">48</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">存储路径</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">storePathRootDir</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/opt/tools/rocketmq/storeSlave</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">storePathCommitLog</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/opt/tools/rocketmq/storeSlave/commitlog</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">storePathConsumeQueue</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/opt/tools/rocketmq/storeSlave/consumequeue</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">storePathIndex</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/opt/tools/rocketmq/storeSlave/index</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">storeCheckpoint</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/opt/tools/rocketmq/storeSlave/checkpoint</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">aborFile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/opt/tools/rocketmq/storeSlave/abort</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">broker角色，ASYNC_MASTER为主节点，SLAVE为从节点</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">brokerRole</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">SLAVE</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">flushDiskType</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ASYNC_FLUSH</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">服务端口</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">listenPort</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">11011</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="调整-worker3-的-broker-配置" tabindex="-1"><a class="header-anchor" href="#调整-worker3-的-broker-配置"><span>调整 worker3 的 broker 配置</span></a></h3><h4 id="broker-a-slave节点" tabindex="-1"><a class="header-anchor" href="#broker-a-slave节点"><span>broker-a-slave节点</span></a></h4><p>配置路径：/opt/tools/rocketmq/rocketmq-all-5.3.0-bin-release/conf/2m-2s-async/broker-a.properties</p><p>配置信息如下</p><div class="language-properties line-numbers-mode" data-ext="properties" data-title="properties"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">broker集群的名称，名字一样的节点就在同一个集群内</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">brokerClusterName</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">VMCluster</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">主从节点的brokerName要保持一致，保证是同一份数据</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">brokerName</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">broker-a</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">brokerId为0的节点是master节点，大于0的就是slave节点</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">brokerId</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">1</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">nameServer服务地址，用“;”进行分割</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">namesrvAddr</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">192.168.3.237:9876</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">;192.168.3.241:9876;192.168.3.248:9876</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">deleteWhen</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">04</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">fileReservedTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">48</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">存储路径</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">storePathRootDir</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/opt/tools/rocketmq/storeSlave</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">storePathCommitLog</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/opt/tools/rocketmq/storeSlave/commitlog</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">storePathConsumeQueue</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/opt/tools/rocketmq/storeSlave/consumequeue</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">storePathIndex</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/opt/tools/rocketmq/storeSlave/index</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">storeCheckpoint</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/opt/tools/rocketmq/storeSlave/checkpoint</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">aborFile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/opt/tools/rocketmq/storeSlave/abort</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">broker角色，ASYNC_MASTER为主节点，SLAVE为从节点</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">brokerRole</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">SLAVE</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">flushDiskType</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ASYNC_FLUSH</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">服务端口</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">listenPort</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">11011</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="broker-b-master节点" tabindex="-1"><a class="header-anchor" href="#broker-b-master节点"><span>broker-b-master节点</span></a></h4><p>配置路径：/opt/tools/rocketmq/rocketmq-all-5.3.0-bin-release/conf/2m-2s-async/broker-b-s.properties</p><p>配置信息如下</p><div class="language-properties line-numbers-mode" data-ext="properties" data-title="properties"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">broker集群的名称，名字一样的节点就在同一个集群内</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">brokerClusterName</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">VMCluster</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">主从节点的brokerName要保持一致，保证是同一份数据</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">brokerName</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">broker-b</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">brokerId为0的节点是master节点，大于0的就是slave节点</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">brokerId</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">0</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">nameServer服务地址，用“;”进行分割</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">namesrvAddr</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">192.168.3.237:9876</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">;192.168.3.241:9876;192.168.3.248:9876</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">deleteWhen</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">04</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">fileReservedTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">48</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">存储路径</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">storePathRootDir</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/opt/tools/rocketmq/store</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">storePathCommitLog</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/opt/tools/rocketmq/store/commitlog</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">storePathConsumeQueue</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/opt/tools/rocketmq/store/consumequeue</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">storePathIndex</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/opt/tools/rocketmq/store/index</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">storeCheckpoint</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/opt/tools/rocketmq/store/checkpoint</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">aborFile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/opt/tools/rocketmq/store/abort</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">broker角色，ASYNC_MASTER为主节点，SLAVE为从节点</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">brokerRole</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ASYNC_MASTER</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">flushDiskType</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ASYNC_FLUSH</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">服务端口</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">listenPort</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">10911</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="逐步启动服务" tabindex="-1"><a class="header-anchor" href="#逐步启动服务"><span>逐步启动服务</span></a></h3><p>work2 服务器上启动 broker-a-master 和 broker-b-slave</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/opt/tools/rocketmq/rocketmq-all-5.3.0-bin-release</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nohup</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">bin/mqbroker</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-c</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">./conf/2m-2s-async/broker-a.properties</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&amp;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nohup</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">bin/mqbroker</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-c</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">./conf/2m-2s-async/broker-b-s.properties</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&amp;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>work3 服务器上启动 broker-b-master 和 broker-a-slave</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/opt/tools/rocketmq/rocketmq-all-5.3.0-bin-release</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nohup</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">bin/mqbroker</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-c</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">./conf/2m-2s-async/broker-b.properties</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&amp;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nohup</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">bin/mqbroker</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-c</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">./conf/2m-2s-async/broker-a-s.properties</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&amp;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+D+`" alt="image-20250907124805678"></p><h2 id="docker部署" tabindex="-1"><a class="header-anchor" href="#docker部署"><span>docker部署</span></a></h2><h3 id="部署nameserver服务" tabindex="-1"><a class="header-anchor" href="#部署nameserver服务"><span>部署NameServer服务</span></a></h3><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">run</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-d</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">--name</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">rmqnamesrv</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-p</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">9876:9876</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">--network</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">rocketmq</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">registry.cn-guangzhou.aliyuncs.com/devyunze/rocketmq:5.3.3</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">sh</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">mqnamesrv</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="部署broker服务" tabindex="-1"><a class="header-anchor" href="#部署broker服务"><span>部署Broker服务</span></a></h3><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">run</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-d</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">--name</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">rmqbroker-home</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">--network</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">rocketmq</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-p</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">10912:10912</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-p</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">10911:10911</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-p</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">10909:10909</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-p</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8080:8080</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-p</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8081:8081</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-e</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">JAVA_OPT_EXT=-Xms512M</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">-Xmx512M</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">-Xmn128m</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-e</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">NAMESRV_ADDR=192.168.3.246:9876</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-v</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/Users/gaohan/Documents/docker/rocketmq/home/broker.conf:/home/rocketmq/rocketmq-5.3.3/conf/broker.conf</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">registry.cn-guangzhou.aliyuncs.com/devyunze/rocketmq:5.3.3</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">sh</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">mqbroker</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">--enable-proxy</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-c</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/home/rocketmq/rocketmq-5.3.3/conf/broker.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>broker.conf配置文件</p><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>brokerIP1=192.168.3.246</span></span>
<span class="line"><span>brokerClusterName=LocalCluster</span></span>
<span class="line"><span>brokerName=broker-a</span></span>
<span class="line"><span>brokerId=0</span></span>
<span class="line"><span>defaultTopicQueueNums=2</span></span>
<span class="line"><span>brokerRole=ASYNC_MASTER</span></span>
<span class="line"><span>flushDiskType=ASYNC_FLUSH</span></span>
<span class="line"><span>autoCreateTopicEnable=true</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="部署dashboard服务" tabindex="-1"><a class="header-anchor" href="#部署dashboard服务"><span>部署Dashboard服务</span></a></h3><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">run</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-d</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">--name</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">rocketmq-dashboard</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-e</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">JAVA_OPTS=-Drocketmq.namesrv.addr=192.168.3.237:9876</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-p</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8082:8082</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-t</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">registry.cn-guangzhou.aliyuncs.com/devyunze/rocketmq-dashboard:2.1.0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,75)]))}const E=a(y,[["render",v],["__file","index.html.vue"]]),C=JSON.parse('{"path":"/article/9jiorekd/","title":"RocketMQ的安装部署","lang":"zh-CN","frontmatter":{"title":"RocketMQ的安装部署","createTime":"2025/09/24 21:02:03","permalink":"/article/9jiorekd/","description":"RocketMQ消息中间件单机于集群模式详细部署操作手册 部署单机rocketmq 解压缩包 image-20250906221934294 调整启用脚本 runserver.sh image-20250906222607460 image-20250906222226007 runbroker.sh image-20250906222726588 i...","head":[["meta",{"property":"og:url","content":"https://blog.gaohan.asia/article/9jiorekd/"}],["meta",{"property":"og:site_name","content":"云泽汇码"}],["meta",{"property":"og:title","content":"RocketMQ的安装部署"}],["meta",{"property":"og:description","content":"RocketMQ消息中间件单机于集群模式详细部署操作手册 部署单机rocketmq 解压缩包 image-20250906221934294 调整启用脚本 runserver.sh image-20250906222607460 image-20250906222226007 runbroker.sh image-20250906222726588 i..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-10-26T12:40:27.000Z"}],["meta",{"property":"article:modified_time","content":"2025-10-26T12:40:27.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"RocketMQ的安装部署\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-10-26T12:40:27.000Z\\",\\"author\\":[]}"]]},"headers":[],"readingTime":{"minutes":3.91,"words":1174},"git":{"updatedTime":1761482427000,"contributors":[{"name":"yunze","username":"yunze","email":"834363368@qq.com","commits":5,"avatar":"https://avatars.githubusercontent.com/yunze?v=4","url":"https://github.com/yunze"}]},"autoDesc":true,"filePathRelative":"manual/340.RocketMQ的安装部署.md","categoryList":[{"id":"3c78b3","sort":10003,"name":"manual"}]}');export{E as comp,C as data};
