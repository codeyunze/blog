import{_ as a,e as i,f as p,o as n}from"./app-Cx_oisp2.js";const e="/assets/image-20250311142028756-STTiV8jG.png",l="/assets/image-20250311144110942-BnWWhZnA.png",t="/assets/image-20250311145135049-DFfzk7aN.png",h="/assets/image-20250311145600728-C_lZOTVB.png",k="/assets/image-20250311145710359-BLCqGUq4.png",c="/assets/image-20250311145918816-amTnZq8F.png",d="/assets/image-20250311150053799-DVYj0XGf.png",r="/assets/image-20250311150650269-CYRrQ4x1.png",g="/assets/image-20250311143454354-Cft4TsO8.png",y="/assets/image-20250311143537459-Bb-NlYDm.png",D="/assets/image-20250311143609899-6oBBP1ok.png",A="/assets/image-20250311151029131-4cmy9nu6.png",o="/assets/image-20250311151118992-BCfL0Q4e.png",B="/assets/image-20250311151204532-BN3aG8nz.png",E="/assets/image-20250311151457281-Ctr9VLB6.png",m="/assets/image-20250311151709988-DBw30D-T.png",C="/assets/image-20250311151950131-OtxFfW_k.png",u={};function v(b,s){return n(),i("div",null,s[0]||(s[0]=[p(`<p>将现有的Spring Boot + Mybatis + MySQL项目迁移到国产数据库如达梦数据库。本文档详细介绍了如何调整现有项目以兼容达梦数据库，并提供了迁移过程中遇到的一些常见问题及其解决方案。</p><h2 id="项目兼容达梦数据库适配方案与常见问题解决方案" tabindex="-1"><a class="header-anchor" href="#项目兼容达梦数据库适配方案与常见问题解决方案"><span>项目兼容达梦数据库适配方案与常见问题解决方案</span></a></h2><h3 id="数据库函数替换策略" tabindex="-1"><a class="header-anchor" href="#数据库函数替换策略"><span>数据库函数替换策略</span></a></h3><h4 id="_1-group-concat-函数处理" tabindex="-1"><a class="header-anchor" href="#_1-group-concat-函数处理"><span>1. <code>GROUP_CONCAT()</code> 函数处理</span></a></h4><p>MySQL中的<code>GROUP_CONCAT()</code>用于合并分组内的值为一个字符串。在达梦数据库中，可以使用<code>WM_CONCAT()</code>函数来实现类似的功能。</p><p><strong>实现步骤：</strong></p><ul><li>在达梦数据库中，使用<code>WM_CONCAT()</code>函数代替MySQL的<code>GROUP_CONCAT()</code>。</li></ul><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">SELECT</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">WM_CONCAT(your_field)</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">AS</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">concatenated_fields</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">FROM</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">your_table</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">GROUP</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">BY</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">your_grouping_field;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>需要注意的是，尽管<code>WM_CONCAT()</code>可以在一定程度上替代<code>GROUP_CONCAT()</code>，但两者之间存在一些差异。例如，<code>WM_CONCAT()</code>可能不支持某些高级选项（如排序、分隔符自定义等），这时需要根据具体情况决定是否继续使用SQL层面的聚合还是转到Java代码层进行处理。</p><p><strong>Java代码层处理示例：</strong> 如果<code>WM_CONCAT()</code>不能满足需求，可以在Service层使用Java流（Stream）API或传统的循环结构来聚合数据。</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">List</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">concatenatedResult</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">yourEntityList</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">stream</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">map</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">YourEntity</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">getField</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">collect</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Collectors</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">joining</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">));</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-时间计算函数的替换" tabindex="-1"><a class="header-anchor" href="#_2-时间计算函数的替换"><span>2. 时间计算函数的替换</span></a></h4><p>针对MySQL中的<code>DATE_SUB(NOW(), INTERVAL 28 DAY)</code> 和 <code>DATE_ADD()</code>，推荐在Java代码中计算好时间之后，再通过参数传递给MyBatis Mapper。</p><p><strong>实现示例：</strong></p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">LocalDateTime</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">now</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">LocalDateTime</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">now</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">LocalDateTime</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">dateBefore28Days</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">now</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">minusDays</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">28</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">yourMapper</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">selectByDate</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">dateBefore28Days</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>通过这种方式，可以更精确地控制时间计算逻辑，并且便于测试和维护。</p><h4 id="_3-聚合函数转换" tabindex="-1"><a class="header-anchor" href="#_3-聚合函数转换"><span>3. 聚合函数转换</span></a></h4><p>将MySQL中的<code>count(name = &#39;张三&#39; or null)</code>转换为MySQL和达梦数据库都支持的<code>SUM(CASE WHEN name = &#39;张三&#39; THEN 1 ELSE 0 END)</code>格式。</p><p><strong>SQL语句调整：</strong></p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">SELECT</span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">SUM</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">CASE</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">WHEN</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">name</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">=</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">张三</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">THEN</span><span class="space"> </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">ELSE</span><span class="space"> </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">END</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">AS</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">count_field</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">FROM</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">your_table;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这种做法不仅提高了SQL的可移植性，也增强了查询表达式的清晰度。</p><h4 id="_4-date-format-函数" tabindex="-1"><a class="header-anchor" href="#_4-date-format-函数"><span>4. DATE_FORMAT()函数</span></a></h4><p>以 date_format 函数为例，MySQL 中的 date_format 函数可以在 DM 数据库 中使用 to_char 或 to_date 函数改写，改写后在达梦中可以达到相同的效果，</p><p>示例 如下：</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">--</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">MySQL</span><span class="space"> </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">select</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">date_format</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">sysdate</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">%Y</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">年%m</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">月</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">from</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">dual</span><span class="space"> </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">--</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">DM</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">select</span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">translate</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(to_char(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">sysdate</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">yyyy-mm#</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">),</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">-#</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">年月</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">from</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">dua</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">--</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">MySQL</span><span class="space"> </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">select</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">DATE_</span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">FORMAT</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(C_</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">FIRST_TIME,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">%Y-%m-%d</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">%H</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">FROM</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">DUAL;</span><span class="space"> </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">--</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">DM</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">select</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">TO_CHAR(C_FIRST_TIME,</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">YYYY-</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">MM-</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">DD</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">HH24</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">FROM</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">DUAL;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>也可以在达梦数据库里自定义创建一个date_format函数，然后函数里面的处理逻辑用达梦的to_char、to_date，这样的好处是不需要去调整代码里的sql语句。</p><h4 id="_5-cast-函数" tabindex="-1"><a class="header-anchor" href="#_5-cast-函数"><span>5. CAST()函数</span></a></h4><p>DM 中的 cast()函数的用法虽然和 MySQL 一致，但使用效果存在不同， MySQL 中对于数值类型的 value 转 char 类型没有限制，DM 中则存在限制，会 报“数据转换失败”等报错，可将 cast(数值类型的 valueaschar)转换为 cast(数值 类型的valueasvarchar),对于unsigned类型可以根据实际情况做对应改变或确定是 否有必要进行转换。</p><h3 id="sql语法及规范注意事项" tabindex="-1"><a class="header-anchor" href="#sql语法及规范注意事项"><span>SQL语法及规范注意事项</span></a></h3><h4 id="group-by-子句遵循标准" tabindex="-1"><a class="header-anchor" href="#group-by-子句遵循标准"><span>GROUP BY 子句遵循标准</span></a></h4><p>确保在<code>GROUP BY</code>子句中包含所有非聚合字段。这符合SQL标准，并有助于提高查询的正确性和性能。</p><p><strong>实践建议：</strong></p><ul><li><p>审查所有涉及<code>GROUP BY</code>的查询，确保其符合SQL标准。</p></li><li><p>使用ORM框架提供的功能自动处理这些细节，减少手动编写复杂SQL的风险。</p></li></ul><p>例如：</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">select</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">name</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">type</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">sum</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(grades)</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">as</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">grades_sum</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">from</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">student</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">group</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">by</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">name</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这种sql就不行，不符合数据库的常规规范，select里的非聚合字段时name、type，而 group by 里只有一个name字段，这就不兼容mysql8、人大金仓和达梦数据库等。</p><p>需要调整为</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">select</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">name</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">type</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">sum</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(grades)</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">as</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">grades_sum</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">from</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">student</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">group</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">by</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">name</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">type</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="其他优化点和注意事项" tabindex="-1"><a class="header-anchor" href="#其他优化点和注意事项"><span>其他优化点和注意事项</span></a></h3><ul><li><strong>数据类型映射</strong>：仔细检查实体类与数据库表之间的数据类型映射，特别是对于日期时间类型、布尔类型等可能存在的差异。</li><li><strong>索引优化</strong>：迁移时重新评估并优化索引设置，以适应新数据库的特点。</li></ul><h4 id="使用mybatis的sql标签配置databaseid" tabindex="-1"><a class="header-anchor" href="#使用mybatis的sql标签配置databaseid"><span>使用mybatis的sql标签配置databaseId</span></a></h4><p>当出现实在无法做到一个sql兼容多个数据库，且无法使用 java 代码的情况，可以使用myabtis提供的sql标签加databaseId配置。</p><table><thead><tr><th>数据库</th><th>databaseId配置</th></tr></thead><tbody><tr><td>mysql数据库</td><td>不用配置，默认为mysql</td></tr><tr><td>人大金仓数据库</td><td>kingbase</td></tr><tr><td>达梦数据库</td><td>dm</td></tr></tbody></table><p>例如：</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">sql</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">id</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">DATE_ADD_SQL</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">DATE_ADD(</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">MAX</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(statistical_date),</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">INTERVAL</span><span class="space"> </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">DAY</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">sql</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">sql</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">id</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">DATE_ADD_SQL</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">databaseId</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">kingbase</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">MAX</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(statistical_date)</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">INTERVAL</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">DAY</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">sql</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">sql</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">id</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">DATE_ADD_SQL</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">databaseId</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">dm</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">DATEADD</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">DAY</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span class="space"> </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">MAX</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(statistical_date))</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">sql</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span></span>
<span class="line"><span class="tab">	</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">select</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">id</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">get</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">resultType</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">com.business.statistical.table.entity.StatisticalTable</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">SELECT</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">unit_id,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">CASE</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">WHEN</span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">MAX</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(statistical_date)</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">IS</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">NOT</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">NULL</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">THEN</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">include</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">refid</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">DATE_ADD_SQL</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">/&gt;</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">ELSE</span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">MAX</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(statistical_date)</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">END</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">statisticalDate</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">FROM</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">statistical_table</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">WHERE</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">unit_id</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">in</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">foreach</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">collection</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ids</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">item</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">id</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">separator</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">open</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">close</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">)</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">#{id}</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;/</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">foreach</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">GROUP</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">BY</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">unit_id</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">select</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="将数据库从mysql迁移到达梦数据库方案" tabindex="-1"><a class="header-anchor" href="#将数据库从mysql迁移到达梦数据库方案"><span>将数据库从mysql迁移到达梦数据库方案</span></a></h2><h3 id="_1-客户端组件安装" tabindex="-1"><a class="header-anchor" href="#_1-客户端组件安装"><span>1. 客户端组件安装</span></a></h3><p>先在本地安装好达梦数据库提供的客户端工具组件</p><p>工具下载地址：https://www.dameng.com/list_103.html</p><p>安装好之后可以看到如下几个工具</p><p><img src="`+e+'" alt="image-20250311142028756"></p><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>DM管理工具</td><td>相当于dbeaver，是达梦数据库专用的可视化工具。</td></tr><tr><td>DM数据迁移工具</td><td>用于将其他数据库的库迁移到达梦数据库，或将达梦数据库的库迁移到其他数据库。</td></tr><tr><td>DM控制台工具</td><td>没用过</td></tr><tr><td>DM审计分析工具</td><td>没用过</td></tr><tr><td>DM性能监视工具</td><td>没用过</td></tr></tbody></table><h3 id="_2-初次迁库操作步骤" tabindex="-1"><a class="header-anchor" href="#_2-初次迁库操作步骤"><span>2. 初次迁库操作步骤</span></a></h3><p>初次将mysql数据库的库迁移到达梦数据库的操作步骤如下：</p><h4 id="新建连接" tabindex="-1"><a class="header-anchor" href="#新建连接"><span>新建连接</span></a></h4><p>打开 <code>DM管理工具</code> ,新建连接</p><p><strong><img src="'+l+'" alt="image-20250311144110942"></strong></p><p>使用运维人员提供的达梦数据库超管账号登录</p><p><img src="'+t+'" alt="image-20250311145135049"></p><h4 id="创建表空间" tabindex="-1"><a class="header-anchor" href="#创建表空间"><span>创建表空间</span></a></h4><p>登录之后创建表空间</p><p><img src="'+h+'" alt="image-20250311145600728"></p><h4 id="创建管理用户" tabindex="-1"><a class="header-anchor" href="#创建管理用户"><span>创建管理用户</span></a></h4><p><img src="'+k+'" alt="image-20250311145710359"></p><p><img src="'+c+'" alt="image-20250311145918816"></p><p>系统权限选这些</p><p><img src="'+d+'" alt="image-20250311150053799"></p><h4 id="创建模式" tabindex="-1"><a class="header-anchor" href="#创建模式"><span>创建模式</span></a></h4><p>模式不需要手动创建，创建好用户之后，就会自动创建一个该用户的模式。</p><p><img src="'+r+'" alt="image-20250311150650269"></p><p>DM管理工具的操作暂时结束，接下来切换到DM数据迁移工具</p><h4 id="新建迁移任务" tabindex="-1"><a class="header-anchor" href="#新建迁移任务"><span>新建迁移任务</span></a></h4><p>打开 <code>DM数据迁移工具</code> ，新建迁移任务</p><p><img src="'+g+'" alt="image-20250311143454354"></p><p><img src="'+y+'" alt="image-20250311143537459"></p><p>选择从mysql迁移到达梦数据库。</p><p><img src="'+D+'" alt="image-20250311143609899"></p><p>输入要迁移的mysql数据库基础信息，然后再下一步。</p><p><img src="'+A+'" alt="image-20250311151029131"></p><p>输入达梦的数据库基础信息</p><p><img src="'+o+'" alt="image-20250311151118992"></p><h4 id="选择迁移策略" tabindex="-1"><a class="header-anchor" href="#选择迁移策略"><span>选择迁移策略</span></a></h4><p>建议将出错后继续执行取消掉，当出现错误的时候建议清理已经迁移的库和表数据，解决错误信息后，重新执行迁移任务。</p><p><img src="'+B+'" alt="image-20250311151204532"></p><p><img src="'+E+'" alt="image-20250311151457281"></p><p><img src="'+m+'" alt="image-20250311151709988"></p><h4 id="开始迁移" tabindex="-1"><a class="header-anchor" href="#开始迁移"><span>开始迁移</span></a></h4><p><img src="'+C+'" alt="image-20250311151950131"></p><p>成功执行后，迁移工作结束！</p>',89)]))}const F=a(u,[["render",v],["__file","index.html.vue"]]),q=JSON.parse('{"path":"/article/sqvk7pon/","title":"国产化适配:MySQL项目转达梦数据库适配兼容操作","lang":"zh-CN","frontmatter":{"title":"国产化适配:MySQL项目转达梦数据库适配兼容操作","createTime":"2025/03/11 17:11:01","permalink":"/article/sqvk7pon/","tags":["国产化","数据库","达梦"],"description":"将现有的Spring Boot + Mybatis + MySQL项目迁移到国产数据库如达梦数据库。本文档详细介绍了如何调整现有项目以兼容达梦数据库，并提供了迁移过程中遇到的一些常见问题及其解决方案。 项目兼容达梦数据库适配方案与常见问题解决方案 数据库函数替换策略 1. GROUP_CONCAT() 函数处理 MySQL中的GROUP_CONCAT(...","head":[["meta",{"property":"og:url","content":"https://blog.gaohan.asia/article/sqvk7pon/"}],["meta",{"property":"og:site_name","content":"云泽汇码"}],["meta",{"property":"og:title","content":"国产化适配:MySQL项目转达梦数据库适配兼容操作"}],["meta",{"property":"og:description","content":"将现有的Spring Boot + Mybatis + MySQL项目迁移到国产数据库如达梦数据库。本文档详细介绍了如何调整现有项目以兼容达梦数据库，并提供了迁移过程中遇到的一些常见问题及其解决方案。 项目兼容达梦数据库适配方案与常见问题解决方案 数据库函数替换策略 1. GROUP_CONCAT() 函数处理 MySQL中的GROUP_CONCAT(..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-11-06T01:44:28.000Z"}],["meta",{"property":"article:tag","content":"国产化"}],["meta",{"property":"article:tag","content":"数据库"}],["meta",{"property":"article:tag","content":"达梦"}],["meta",{"property":"article:modified_time","content":"2025-11-06T01:44:28.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"国产化适配:MySQL项目转达梦数据库适配兼容操作\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-11-06T01:44:28.000Z\\",\\"author\\":[]}"]]},"headers":[],"readingTime":{"minutes":5.96,"words":1788},"git":{"updatedTime":1762393468000,"contributors":[{"name":"yunze","username":"yunze","email":"56632502+YUNZE-GH@users.noreply.github.com","commits":2,"avatar":"https://avatars.githubusercontent.com/yunze?v=4","url":"https://github.com/yunze"},{"name":"yunze","username":"yunze","email":"834363368@qq.com","commits":2,"avatar":"https://avatars.githubusercontent.com/yunze?v=4","url":"https://github.com/yunze"}]},"autoDesc":true,"filePathRelative":"database/114.MySQL项目转达梦数据库适配兼容操作.md","categoryList":[{"id":"11e0ee","sort":10005,"name":"database"}]}');export{F as comp,q as data};
