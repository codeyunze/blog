import{_ as a,e as i,f as n,o as p}from"./app-Cx_oisp2.js";const e="/assets/image-20231114235650898-lx-0Fwsa.png",l="/assets/image-20231114235425525-CsJsSWK1.png",t="/assets/image-20231114235448895-CBJ9SR5S.png",h="/assets/image-20231115130641871-B0SaSdif.png",c="/assets/image-20231116221031658-D7jzpF0f.png",k="/assets/image-20231116125609025-yKjK_6mq.png",r="/assets/image-20231116221531154-DbYA2s3r.png",d="/assets/image-20231116130332404-ZeXbVGTq.png",g="/assets/image-20231116221802420-BLj7aRaW.png",o="/assets/image-20231116224821420-WSKUR6KU.png",m="/assets/image-20231116230215841-DKX2a-dy.png",y="/assets/image-20231116230533898-DLvYxQX0.png",A="/assets/image-20231116230634667-BfLCw_6e.png",u="/assets/image-20231116230939928-DPlsNc_E.png",v="/assets/image-20231116231707880-9EcYIymC.png",D="/assets/image-20231116231903666-Dfo7yCKK.png",C="/assets/image-20231116232636949-CvBeAA3G.png",B="/assets/image-20231116232914694-BKCKWT4h.png",b="/assets/image-20231116233215698-l8TRGDJo.png",_="/assets/image-20231116234125636-diRomcWo.png",x="/assets/image-20231116234354732-Bp5rEQWk.png",j="/assets/image-20231117002230933-M_nXFCcB.png",J="/assets/image-20231117002509345-DMPaADAc.png",E={};function f(S,s){return p(),i("div",null,s[0]||(s[0]=[n('<p>Jenkins 是一个开源的持续集成（Continuous Integration, CI）和持续交付（Continuous Delivery, CD）工具，广泛应用于软件开发过程中。它可以帮助团队自动化构建、测试和部署应用程序，从而提高开发效率和质量。</p><h1 id="jenkins自动化部署" tabindex="-1"><a class="header-anchor" href="#jenkins自动化部署"><span>Jenkins自动化部署</span></a></h1><blockquote><p>提示：本教程基于CentOS Linux 7系统下进行</p></blockquote><h2 id="jenkins的安装" tabindex="-1"><a class="header-anchor" href="#jenkins的安装"><span>Jenkins的安装</span></a></h2><h3 id="_1-下载安装jdk11" tabindex="-1"><a class="header-anchor" href="#_1-下载安装jdk11"><span>1. 下载安装jdk11</span></a></h3><p>官网下载地址：https://www.oracle.com/cn/java/technologies/javase/jdk11-archive-downloads.html</p><p>本文档教程选择的是jdk-11.0.20_linux-x64_bin.tar.gz</p><p>解压jdk-11.0.20_linux-x64_bin.tar.gz命令为：</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">tar</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-zxvf</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">jdk-11.0.20_linux-x64_bin.tar.gz</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="'+e+'" alt="image-20231114235650898"></p><h3 id="_2-下载jenkins的war包" tabindex="-1"><a class="header-anchor" href="#_2-下载jenkins的war包"><span>2. 下载Jenkins的war包</span></a></h3><p>官网下载地址：https://mirrors.tuna.tsinghua.edu.cn/jenkins/war-stable/2.414.3/jenkins.war</p><p><img src="'+l+`" alt="image-20231114235425525"></p><h3 id="_3-准备jenkins启动脚本" tabindex="-1"><a class="header-anchor" href="#_3-准备jenkins启动脚本"><span>3. 准备Jenkins启动脚本</span></a></h3><p>编写一个Jenkins的启动脚本，简化之后每次启动都要敲命令；</p><p>将Jenkins的访问端口设置为3001；（可以根据自己需求设置端口）</p><p>创建startup.sh脚本</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">vim</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/usr/local/tools/jenkins/startup.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>startup.sh脚本</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#!/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nohup</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/usr/local/tools/jdk-11.0.20/bin/java</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-jar</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/usr/local/tools/jenkins/jenkins.war</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">--httpPort=3001</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/dev/null</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">2&gt;&amp;1</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&amp;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使脚本具有执行权限</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">chmod</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">+x</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/usr/local/tools/jenkins/startup.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="`+t+'" alt="image-20231114235448895"></p><h3 id="_4-启动jenkins" tabindex="-1"><a class="header-anchor" href="#_4-启动jenkins"><span>4. 启动Jenkins</span></a></h3><p>执行如下命令即可</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">./startup.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>初次启动Jenkins，系统会要求使用其自动生成的密码进行解锁，初始密码在 <strong>/root/.jenkins/secrets/initialAdminPassword</strong> 文件中，启动时的日志里也有打印出来；</p><h3 id="_5-访问并解锁jenkins" tabindex="-1"><a class="header-anchor" href="#_5-访问并解锁jenkins"><span>5. 访问并解锁Jenkins</span></a></h3><p>访问http://IP:3001，等待解锁Jenkins页面出现，就是Unlock Jenkins页面，在Administrator password下的输入框输入你的启动Jenkins时获取的临时密码即可</p><h2 id="jenkins的基础配置与插件安装" tabindex="-1"><a class="header-anchor" href="#jenkins的基础配置与插件安装"><span>Jenkins的基础配置与插件安装</span></a></h2><h3 id="_1-基础插件安装" tabindex="-1"><a class="header-anchor" href="#_1-基础插件安装"><span>1. 基础插件安装</span></a></h3><blockquote><p>Dashboard--&gt;系统管理(Manage Jenkins)--&gt;插件管理(Plugins)--&gt;Avaliable Plugins</p></blockquote><p>安装基础插件SSH server、Publish Over SSH、NodeJS Plugin、Maven Integration plugin、Git plugin、Git client plugin；</p><p>下载插件后会提示要重启，自动重启后就会生效</p><p><img src="'+h+'" alt="image-20231115130641871"></p><h3 id="_2-配置项目运行所需的jdk8环境" tabindex="-1"><a class="header-anchor" href="#_2-配置项目运行所需的jdk8环境"><span>2. 配置项目运行所需的Jdk8环境</span></a></h3><ul><li><p>官网下载地址：https://www.oracle.com/java/technologies/javase/javase8-archive-downloads.html</p><p>本项目运行选择的是jdk-8u301-linux-x64.tar.gz</p><p>可与之前Jenkins运行所需的jdk11放一起</p><p>解压命令为</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">tar</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-zxvf</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">jdk-8u301-linux-x64.tar.gz</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="'+c+'" alt="image-20231116221031658"></p></li><li><p>Jenkins配置JDK</p><p>Dashboard--&gt;系统管理(Manage Jenkins)--&gt;全局工具配置(Tools)--&gt;JDK安装</p><p>新增JDK，JAVA_HOME配置jdk8的路径</p><p><img src="'+k+'" alt="image-20231116125609025"></p></li></ul><h3 id="_3-配置jenkins自动拉取代码所需的git工具" tabindex="-1"><a class="header-anchor" href="#_3-配置jenkins自动拉取代码所需的git工具"><span>3. 配置Jenkins自动拉取代码所需的Git工具</span></a></h3><ul><li><p>Jenkins所在服务器上安装Git</p><p>安装命令<code>sudo yum install -y git</code></p><p>查看git版本命令<code> git --version</code></p><p>安装git的可执行文件默认路径为<code>/usr/bin/git</code></p><p><img src="'+r+'" alt="image-20231116221531154"></p></li><li><p>Jenkins上配置Git</p><blockquote><p>Dashboard--&gt;系统管理(Manage Jenkins)--&gt;全局工具配置(Tools)--&gt;Git installations</p></blockquote><p><img src="'+d+'" alt="image-20231116130332404"></p></li></ul><h3 id="_4-maven安装" tabindex="-1"><a class="header-anchor" href="#_4-maven安装"><span>4. Maven安装</span></a></h3><blockquote><p>Dashboard--&gt;系统管理(Manage Jenkins)--&gt;全局工具配置(Tools)--&gt;Git installations</p></blockquote><p>选择自己需要的maven版本即可，勾选自动安装</p><p><img src="'+g+`" alt="image-20231116130332404"></p><h3 id="_5-配置publish-over-ssh" tabindex="-1"><a class="header-anchor" href="#_5-配置publish-over-ssh"><span>5. 配置Publish over SSH</span></a></h3><ul><li><p>生成SSH密钥</p><p>先<strong>在Jenkins所在的服务器上生成ssh密钥</strong>，注意是Jenkins所在的服务器，命令如下：</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ssh-keygen</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-t</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">rsa</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-P</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>然后一路回车键，接受默认文件位置和文件名，为了方便也不使用密码短语</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">整个交互过程</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">root@VM-20-12-centos</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">tools</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">#</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ssh-keygen</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-t</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">rsa</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-P</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;&#39;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Generating</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">public/private</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">rsa</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">key</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">pair.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Enter</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">file</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">in</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">which</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">to</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">save</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">the</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">key</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(/root/.ssh/id_rsa):</span><span class="space"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Created</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">directory</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/root/.ssh</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Enter</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">passphrase</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(empty</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">for</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">no</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">passphrase</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">):</span><span class="space"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Enter</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">same</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">passphrase</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">again:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Your</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">identification</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">has</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">been</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">saved</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">in</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/root/.ssh/id_rsa.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Your</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">public</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">key</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">has</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">been</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">saved</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">in</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/root/.ssh/id_rsa.pub.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">The</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">key</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">fingerprint</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">is:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">SHA256:RpNQDtJe92E5qovCrKhoO4CiN4Jn0Y3LT6SPbTKFg4E</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">The</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">key</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">s</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">randomart</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">image</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">is:</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">+---[RSA</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">4096]----+</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">|</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">..o..</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">|</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">|</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">..+...</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">|</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">|</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.=.</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">+</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">o</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">|</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">|E</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">..</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">..</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">|</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">|.</span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">+</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">+.</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">S.</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">|</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">|+</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">o</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=oo..</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">|</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">|=</span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=.+..</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">|</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">|=+=</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">O=o</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">|</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">|**+o.*+</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">|</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">+----[SHA256]-----+</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">[root@VM-20-12-centos</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">tools]#</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+o+`" alt="image-20231116224821420"></p></li><li><p>上传公钥</p><p>将生成的SSH密钥对里的公钥文件上传到jar包服务所需要运行的服务器，后面需要Jenkins自动将编译好的jar包上传到这台服务器上。</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">~</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ls</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.ssh/</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ssh-copy-id</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-i</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.ssh/id_rsa.pub</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">服务器IP地址</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>整个命令的作用是将本地计算机的公钥文件复制到远程主机上的<code>authorized_keys</code>文件中，从而实现无密码登录；</p></li><li><p>验证是否可以无密码登录远程</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">服务器IP地址</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>在Jenkins上配置Publish over SSH</p><blockquote><p>Dashboard--&gt;系统管理(Manage Jenkins)--&gt;系统配置（System）--&gt;Publish over SSH</p></blockquote><p><img src="`+m+'" alt="image-20231116230215841"></p></li></ul><p>环境准备完毕！</p><h2 id="自动部署maven项目" tabindex="-1"><a class="header-anchor" href="#自动部署maven项目"><span>自动部署Maven项目</span></a></h2><h3 id="_1-创建一个maven任务" tabindex="-1"><a class="header-anchor" href="#_1-创建一个maven任务"><span>1. 创建一个Maven任务</span></a></h3><p><img src="'+y+'" alt="image-20231116230533898"></p><p><img src="'+A+'" alt="image-20231116230634667"></p><h3 id="_2-配置general" tabindex="-1"><a class="header-anchor" href="#_2-配置general"><span>2. 配置General</span></a></h3><p>丢弃旧的构建核心意思就是将旧的jar包扔掉，如果有打算回滚服务到很多个版本之前，这里的“保持构建的最大个数”就得设置大一点。一般也就保留3~5个。</p><p><img src="'+u+'" alt="image-20231116230939928"></p><h3 id="_3-源码管理配置" tabindex="-1"><a class="header-anchor" href="#_3-源码管理配置"><span>3. 源码管理配置</span></a></h3><p><img src="'+v+'" alt="image-20231116231707880"></p><p>添加git访问凭据，例：</p><p><img src="'+D+'" alt="image-20231116231903666"></p><h3 id="_4-构建触发器配置" tabindex="-1"><a class="header-anchor" href="#_4-构建触发器配置"><span>4. 构建触发器配置</span></a></h3><p>构建触发器：就是什么时候触发自动部署这个操作；</p><p>一般只用定时构建和轮询PCM；</p><p>定时构建：根据设置的日程表（类似于Cron），去定时自动拉取代码、编译打包、上传服务器、运行；</p><p>轮询PCM：如果git仓库代码有变动，就自动拉取代码、编译打包、上传服务器、运行；</p><p>因为是测试，所以此处用的是默认配置；</p><p><img src="'+C+'" alt="image-20231116232636949"></p><h3 id="_5-构建环境配置" tabindex="-1"><a class="header-anchor" href="#_5-构建环境配置"><span>5. 构建环境配置</span></a></h3><p>选择我们在之前在<code>Dashboard--&gt;系统管理(Manage Jenkins)--&gt;全局工具配置(Tools)--&gt;JDK安装</code>里配置JDK8即可；</p><p><img src="'+B+'" alt="image-20231116232914694"></p><h3 id="_6-编译打包配置" tabindex="-1"><a class="header-anchor" href="#_6-编译打包配置"><span>6. 编译打包配置</span></a></h3><p><img src="'+b+`" alt="image-20231116233215698"></p><h3 id="_7-服务上传运行配置" tabindex="-1"><a class="header-anchor" href="#_7-服务上传运行配置"><span>7. 服务上传运行配置</span></a></h3><p>jar包运行脚本</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">source</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/etc/profile</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/data/mall/test</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ps</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-ef</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">|</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">grep</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">test-0.0.1-SNAPSHOT.jar</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">|</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">grep</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-v</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">grep</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">|</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">awk</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">{print</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$2}</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">|</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">xargs</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">kill</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-s</span><span class="space"> </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">9</span><span class="space"> </span><span class="space"> </span><span class="space"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">BUILD_ID</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">dontKillMe</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nohup</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">java</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-jar</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">test-0.0.1-SNAPSHOT.jar</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nohup.out</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">2&gt;&amp;1</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&amp;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+_+'" alt="image-20231116234125636"></p><p>test项目的目录结构</p><p><img src="'+x+'" alt="image-20231116234354732"></p><h3 id="_8-配置完成-立即构建" tabindex="-1"><a class="header-anchor" href="#_8-配置完成-立即构建"><span>8. 配置完成，立即构建</span></a></h3><p><img src="'+j+'" alt="image-20231117002230933"></p><h3 id="_9-查看验证" tabindex="-1"><a class="header-anchor" href="#_9-查看验证"><span>9. 查看验证</span></a></h3><p>前往jar包运行的服务器进行测试验证</p><p><img src="'+J+'" alt="image-20231117002509345"></p>',80)]))}const P=a(E,[["render",f],["__file","index.html.vue"]]),M=JSON.parse('{"path":"/manual/v4k6ctdw/","title":"Jenkins自动化部署","lang":"zh-CN","frontmatter":{"title":"Jenkins自动化部署","createTime":"2023/11/14 11:15:26","permalink":"/manual/v4k6ctdw/","tags":["手册","Jenkins","CI/CD"],"description":"Jenkins 是一个开源的持续集成（Continuous Integration, CI）和持续交付（Continuous Delivery, CD）工具，广泛应用于软件开发过程中。它可以帮助团队自动化构建、测试和部署应用程序，从而提高开发效率和质量。 Jenkins自动化部署 提示：本教程基于CentOS Linux 7系统下进行 Jenkins的...","head":[["meta",{"property":"og:url","content":"https://blog.gaohan.asia/manual/v4k6ctdw/"}],["meta",{"property":"og:site_name","content":"云泽汇码"}],["meta",{"property":"og:title","content":"Jenkins自动化部署"}],["meta",{"property":"og:description","content":"Jenkins 是一个开源的持续集成（Continuous Integration, CI）和持续交付（Continuous Delivery, CD）工具，广泛应用于软件开发过程中。它可以帮助团队自动化构建、测试和部署应用程序，从而提高开发效率和质量。 Jenkins自动化部署 提示：本教程基于CentOS Linux 7系统下进行 Jenkins的..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-03-09T10:39:32.000Z"}],["meta",{"property":"article:tag","content":"手册"}],["meta",{"property":"article:tag","content":"Jenkins"}],["meta",{"property":"article:tag","content":"CI/CD"}],["meta",{"property":"article:modified_time","content":"2025-03-09T10:39:32.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Jenkins自动化部署\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-03-09T10:39:32.000Z\\",\\"author\\":[]}"]]},"headers":[],"readingTime":{"minutes":4.85,"words":1455},"git":{"updatedTime":1741516772000,"contributors":[{"name":"yunze","username":"yunze","email":"56632502+YUNZE-GH@users.noreply.github.com","commits":1,"avatar":"https://avatars.githubusercontent.com/yunze?v=4","url":"https://github.com/yunze"}]},"autoDesc":true,"filePathRelative":"manual/341.Jenkins自动化部署.md","categoryList":[{"id":"3c78b3","sort":10003,"name":"manual"}]}');export{P as comp,M as data};
