import{_ as a,e as p,f as n,o as c}from"./app-Cx_oisp2.js";const e={};function l(i,s){return c(),p("div",null,s[0]||(s[0]=[n(`<p>如果CPU的使用率没有达到30%，则可以启动工具，使其占用率达到30%</p><p>添加依赖</p><div class="language-yaml line-numbers-mode" data-ext="yaml" data-title="yaml"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&lt;dependency&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&lt;groupId&gt;com.github.oshi&lt;/groupId&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&lt;artifactId&gt;oshi-core&lt;/artifactId&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&lt;version&gt;6.8.2&lt;/version&gt;</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&lt;/dependency&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>实现代码</p><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>import</span><span class="space"> </span><span>cn.hutool.core.date.DatePattern;</span></span>
<span class="line"><span>import</span><span class="space"> </span><span>cn.hutool.core.date.LocalDateTimeUtil;</span></span>
<span class="line"><span>import</span><span class="space"> </span><span>com.alibaba.fastjson.JSON;</span></span>
<span class="line"><span>import</span><span class="space"> </span><span>com.alibaba.fastjson.JSONObject;</span></span>
<span class="line"><span>import</span><span class="space"> </span><span>org.springframework.boot.autoconfigure.condition.ConditionalOnProperty;</span></span>
<span class="line"><span>import</span><span class="space"> </span><span>org.springframework.scheduling.annotation.Scheduled;</span></span>
<span class="line"><span>import</span><span class="space"> </span><span>org.springframework.stereotype.Component;</span></span>
<span class="line"><span>import</span><span class="space"> </span><span>oshi.SystemInfo;</span></span>
<span class="line"><span>import</span><span class="space"> </span><span>oshi.hardware.CentralProcessor;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>import</span><span class="space"> </span><span>java.lang.management.ManagementFactory;</span></span>
<span class="line"><span>import</span><span class="space"> </span><span>java.lang.management.OperatingSystemMXBean;</span></span>
<span class="line"><span>import</span><span class="space"> </span><span>java.math.BigDecimal;</span></span>
<span class="line"><span>import</span><span class="space"> </span><span>java.math.RoundingMode;</span></span>
<span class="line"><span>import</span><span class="space"> </span><span>java.time.LocalDateTime;</span></span>
<span class="line"><span>import</span><span class="space"> </span><span>java.util.concurrent.CopyOnWriteArraySet;</span></span>
<span class="line"><span>import</span><span class="space"> </span><span>java.util.concurrent.ExecutorService;</span></span>
<span class="line"><span>import</span><span class="space"> </span><span>java.util.concurrent.Executors;</span></span>
<span class="line"><span>import</span><span class="space"> </span><span>java.util.concurrent.atomic.AtomicBoolean;</span></span>
<span class="line"><span>import</span><span class="space"> </span><span>java.util.concurrent.atomic.AtomicInteger;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span class="space"> </span><span>*</span><span class="space"> </span><span>如果CPU的使用率没有达到30%，则启动一个CPU密集型任务，使其占用率达到30%</span></span>
<span class="line"><span class="space"> </span><span>*</span></span>
<span class="line"><span class="space"> </span><span>*</span><span class="space"> </span><span>@author</span><span class="space"> </span><span>yunze</span></span>
<span class="line"><span class="space"> </span><span>*</span><span class="space"> </span><span>@apiNote</span><span class="space"> </span><span>启动该任务需要再application.yml配置文件里配置task.cpuUsage.enabled=true，该任务默认是不启动的。</span></span>
<span class="line"><span class="space"> </span><span>*</span><span class="space"> </span><span>@since</span><span class="space"> </span><span>2025/7/23</span><span class="space"> </span><span>14:33</span></span>
<span class="line"><span class="space"> </span><span>*/</span></span>
<span class="line"><span>@ConditionalOnProperty(name</span><span class="space"> </span><span>=</span><span class="space"> </span><span>&quot;task.cpuUsage.enabled&quot;,</span><span class="space"> </span><span>havingValue</span><span class="space"> </span><span>=</span><span class="space"> </span><span>&quot;true&quot;,</span><span class="space"> </span><span>matchIfMissing</span><span class="space"> </span><span>=</span><span class="space"> </span><span>false)</span></span>
<span class="line"><span>@Component</span></span>
<span class="line"><span>public</span><span class="space"> </span><span>class</span><span class="space"> </span><span>OshiScheduler</span><span class="space"> </span><span>{</span></span>
<span class="line"><span></span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>//</span><span class="space"> </span><span>目标</span><span class="space"> </span><span>CPU</span><span class="space"> </span><span>使用率（30%）</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>private</span><span class="space"> </span><span>static</span><span class="space"> </span><span>final</span><span class="space"> </span><span>double</span><span class="space"> </span><span>TARGET_CPU_USAGE</span><span class="space"> </span><span>=</span><span class="space"> </span><span>0.3;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>//</span><span class="space"> </span><span>线程池</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>private</span><span class="space"> </span><span>static</span><span class="space"> </span><span>final</span><span class="space"> </span><span>ExecutorService</span><span class="space"> </span><span>executor</span><span class="space"> </span><span>=</span><span class="space"> </span><span>Executors.newCachedThreadPool();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>//</span><span class="space"> </span><span>任务运行状态</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>private</span><span class="space"> </span><span>static</span><span class="space"> </span><span>final</span><span class="space"> </span><span>AtomicBoolean</span><span class="space"> </span><span>running</span><span class="space"> </span><span>=</span><span class="space"> </span><span>new</span><span class="space"> </span><span>AtomicBoolean(true);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>//</span><span class="space"> </span><span>任务数</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>private</span><span class="space"> </span><span>static</span><span class="space"> </span><span>final</span><span class="space"> </span><span>AtomicInteger</span><span class="space"> </span><span>taskCount</span><span class="space"> </span><span>=</span><span class="space"> </span><span>new</span><span class="space"> </span><span>AtomicInteger(0);</span></span>
<span class="line"><span></span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>//</span><span class="space"> </span><span>需要停止的任务</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>private</span><span class="space"> </span><span>static</span><span class="space"> </span><span>final</span><span class="space"> </span><span>AtomicInteger</span><span class="space"> </span><span>needStopTaskCount</span><span class="space"> </span><span>=</span><span class="space"> </span><span>new</span><span class="space"> </span><span>AtomicInteger(0);</span></span>
<span class="line"><span></span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>private</span><span class="space"> </span><span>static</span><span class="space"> </span><span>final</span><span class="space"> </span><span>CopyOnWriteArraySet&lt;String&gt;</span><span class="space"> </span><span>taskList</span><span class="space"> </span><span>=</span><span class="space"> </span><span>new</span><span class="space"> </span><span>CopyOnWriteArraySet&lt;&gt;();</span></span>
<span class="line"><span></span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>@Scheduled(cron</span><span class="space"> </span><span>=</span><span class="space"> </span><span>&quot;0/5</span><span class="space"> </span><span>*</span><span class="space"> </span><span>*</span><span class="space"> </span><span>*</span><span class="space"> </span><span>*</span><span class="space"> </span><span>?&quot;)</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>public</span><span class="space"> </span><span>void</span><span class="space"> </span><span>monitorCPUUsage()</span><span class="space"> </span><span>{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>getSystemUsage();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>double</span><span class="space"> </span><span>cpuUsage</span><span class="space"> </span><span>=</span><span class="space"> </span><span>getCpuUsage();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>System.out.printf(LocalDateTimeUtil.format(LocalDateTime.now(),</span><span class="space"> </span><span>DatePattern.NORM_DATETIME_PATTERN)</span><span class="space"> </span><span>+</span><span class="space"> </span><span>&quot;</span><span class="space"> </span><span>CPU</span><span class="space"> </span><span>使用率:</span><span class="space"> </span><span>%.2f%%，任务数:%d\\n&quot;,</span><span class="space"> </span><span>cpuUsage</span><span class="space"> </span><span>*</span><span class="space"> </span><span>100,</span><span class="space"> </span><span>taskList.size());</span></span>
<span class="line"><span></span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>/**</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>*</span><span class="space"> </span><span>检查操作系统的CPU使用情况</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>*/</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>@Scheduled(cron</span><span class="space"> </span><span>=</span><span class="space"> </span><span>&quot;0/15</span><span class="space"> </span><span>*</span><span class="space"> </span><span>*</span><span class="space"> </span><span>*</span><span class="space"> </span><span>*</span><span class="space"> </span><span>?&quot;)</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>public</span><span class="space"> </span><span>void</span><span class="space"> </span><span>checkOSHI()</span><span class="space"> </span><span>{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>System.out.println(&quot;开始监控并控制</span><span class="space"> </span><span>CPU</span><span class="space"> </span><span>使用率...&quot;);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>double</span><span class="space"> </span><span>cpuUsage</span><span class="space"> </span><span>=</span><span class="space"> </span><span>getCpuUsage();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>System.out.printf(&quot;当前</span><span class="space"> </span><span>CPU</span><span class="space"> </span><span>使用率:</span><span class="space"> </span><span>%.2f%%\\n&quot;,</span><span class="space"> </span><span>cpuUsage</span><span class="space"> </span><span>*</span><span class="space"> </span><span>100);</span></span>
<span class="line"><span></span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>if</span><span class="space"> </span><span>(cpuUsage</span><span class="space"> </span><span>&lt;</span><span class="space"> </span><span>TARGET_CPU_USAGE)</span><span class="space"> </span><span>{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>//</span><span class="space"> </span><span>当前</span><span class="space"> </span><span>CPU</span><span class="space"> </span><span>使用率太低，增加任务</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>startCpuIntensiveTask();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>}</span><span class="space"> </span><span>else</span><span class="space"> </span><span>if</span><span class="space"> </span><span>(cpuUsage</span><span class="space"> </span><span>&gt;</span><span class="space"> </span><span>TARGET_CPU_USAGE</span><span class="space"> </span><span>+</span><span class="space"> </span><span>0.2)</span><span class="space"> </span><span>{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>//</span><span class="space"> </span><span>当前</span><span class="space"> </span><span>CPU</span><span class="space"> </span><span>使用率太高，减少任务</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>stopCpuIntensiveTask();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>}</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>/**</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>*</span><span class="space"> </span><span>获取当前</span><span class="space"> </span><span>CPU</span><span class="space"> </span><span>使用率</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>*/</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>public</span><span class="space"> </span><span>static</span><span class="space"> </span><span>double</span><span class="space"> </span><span>getCpuUsage()</span><span class="space"> </span><span>{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>SystemInfo</span><span class="space"> </span><span>systemInfo</span><span class="space"> </span><span>=</span><span class="space"> </span><span>new</span><span class="space"> </span><span>SystemInfo();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>CentralProcessor</span><span class="space"> </span><span>processor</span><span class="space"> </span><span>=</span><span class="space"> </span><span>systemInfo.getHardware().getProcessor();</span></span>
<span class="line"><span></span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>long[]</span><span class="space"> </span><span>prevTicks</span><span class="space"> </span><span>=</span><span class="space"> </span><span>processor.getSystemCpuLoadTicks();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>try</span><span class="space"> </span><span>{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>Thread.sleep(500);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>}</span><span class="space"> </span><span>catch</span><span class="space"> </span><span>(InterruptedException</span><span class="space"> </span><span>e)</span><span class="space"> </span><span>{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>e.printStackTrace();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>}</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>return</span><span class="space"> </span><span>processor.getSystemCpuLoadBetweenTicks(prevTicks);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>/**</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>*</span><span class="space"> </span><span>启动一个</span><span class="space"> </span><span>CPU</span><span class="space"> </span><span>密集型任务</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>*/</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>public</span><span class="space"> </span><span>static</span><span class="space"> </span><span>void</span><span class="space"> </span><span>startCpuIntensiveTask()</span><span class="space"> </span><span>{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>System.out.println(&quot;启动一个</span><span class="space"> </span><span>CPU</span><span class="space"> </span><span>密集型任务&quot;);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>if</span><span class="space"> </span><span>(taskCount.get()</span><span class="space"> </span><span>&gt;=</span><span class="space"> </span><span>100)</span><span class="space"> </span><span>{</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>//</span><span class="space"> </span><span>限制最大任务数</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>return;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>}</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>taskCount.incrementAndGet();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>if</span><span class="space"> </span><span>(needStopTaskCount.get()</span><span class="space"> </span><span>&gt;</span><span class="space"> </span><span>0)</span><span class="space"> </span><span>{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>needStopTaskCount.decrementAndGet();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>return;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>executor.submit(()</span><span class="space"> </span><span>-&gt;</span><span class="space"> </span><span>{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>while</span><span class="space"> </span><span>(running.get())</span><span class="space"> </span><span>{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>if</span><span class="space"> </span><span>(needStopTaskCount.get()</span><span class="space"> </span><span>&gt;</span><span class="space"> </span><span>0)</span><span class="space"> </span><span>{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>needStopTaskCount.decrementAndGet();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>System.out.println(&quot;停止了一个任务&quot;);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>taskList.remove(Thread.currentThread().getName());</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>return;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>}</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>taskList.add(Thread.currentThread().getName());</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>//</span><span class="space"> </span><span>简单的</span><span class="space"> </span><span>CPU</span><span class="space"> </span><span>密集型计算</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>double</span><span class="space"> </span><span>result</span><span class="space"> </span><span>=</span><span class="space"> </span><span>0;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>for</span><span class="space"> </span><span>(int</span><span class="space"> </span><span>i</span><span class="space"> </span><span>=</span><span class="space"> </span><span>0;</span><span class="space"> </span><span>i</span><span class="space"> </span><span>&lt;</span><span class="space"> </span><span>100000</span><span class="space"> </span><span>&amp;&amp;</span><span class="space"> </span><span>running.get();</span><span class="space"> </span><span>i++)</span><span class="space"> </span><span>{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>result</span><span class="space"> </span><span>+=</span><span class="space"> </span><span>Math.sqrt(i);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>}</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>//</span><span class="space"> </span><span>模拟短暂空闲</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>//</span><span class="space"> </span><span>LockSupport.parkNanos(WORK_INTERVAL_NS);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>}</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>});</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>/**</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>*</span><span class="space"> </span><span>停止一个任务</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>*/</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>public</span><span class="space"> </span><span>static</span><span class="space"> </span><span>void</span><span class="space"> </span><span>stopCpuIntensiveTask()</span><span class="space"> </span><span>{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>needStopTaskCount.addAndGet(1);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>if</span><span class="space"> </span><span>(taskCount.get()</span><span class="space"> </span><span>&gt;</span><span class="space"> </span><span>0)</span><span class="space"> </span><span>{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>taskCount.decrementAndGet();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>}</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>System.out.println(&quot;需要停止任务数：&quot;</span><span class="space"> </span><span>+</span><span class="space"> </span><span>needStopTaskCount.get());</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>/**</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>*</span><span class="space"> </span><span>停止所有任务（程序退出时调用）</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>*/</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>public</span><span class="space"> </span><span>static</span><span class="space"> </span><span>void</span><span class="space"> </span><span>shutdown()</span><span class="space"> </span><span>{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>System.out.println(&quot;停止所有任务&quot;);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>running.set(false);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>executor.shutdown();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>public</span><span class="space"> </span><span>void</span><span class="space"> </span><span>getSystemUsage()</span><span class="space"> </span><span>{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>final</span><span class="space"> </span><span>long</span><span class="space"> </span><span>GB</span><span class="space"> </span><span>=</span><span class="space"> </span><span>1024</span><span class="space"> </span><span>*</span><span class="space"> </span><span>1024</span><span class="space"> </span><span>*</span><span class="space"> </span><span>1024;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>//</span><span class="space"> </span><span>while</span><span class="space"> </span><span>(true)</span><span class="space"> </span><span>{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>OperatingSystemMXBean</span><span class="space"> </span><span>operatingSystemMXBean</span><span class="space"> </span><span>=</span><span class="space"> </span><span>ManagementFactory.getOperatingSystemMXBean();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>String</span><span class="space"> </span><span>osJson</span><span class="space"> </span><span>=</span><span class="space"> </span><span>JSON.toJSONString(operatingSystemMXBean);</span></span>
<span class="line"><span>//</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>System.out.println(&quot;osJson</span><span class="space"> </span><span>is</span><span class="space"> </span><span>&quot;</span><span class="space"> </span><span>+</span><span class="space"> </span><span>osJson);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>JSONObject</span><span class="space"> </span><span>jsonObject</span><span class="space"> </span><span>=</span><span class="space"> </span><span>JSON.parseObject(osJson);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>double</span><span class="space"> </span><span>processCpuLoad</span><span class="space"> </span><span>=</span><span class="space"> </span><span>jsonObject.getDouble(&quot;processCpuLoad&quot;)</span><span class="space"> </span><span>*</span><span class="space"> </span><span>100;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>double</span><span class="space"> </span><span>systemCpuLoad</span><span class="space"> </span><span>=</span><span class="space"> </span><span>jsonObject.getDouble(&quot;systemCpuLoad&quot;)</span><span class="space"> </span><span>*</span><span class="space"> </span><span>100;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>Long</span><span class="space"> </span><span>totalPhysicalMemorySize</span><span class="space"> </span><span>=</span><span class="space"> </span><span>jsonObject.getLong(&quot;totalPhysicalMemorySize&quot;);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>Long</span><span class="space"> </span><span>freePhysicalMemorySize</span><span class="space"> </span><span>=</span><span class="space"> </span><span>jsonObject.getLong(&quot;freePhysicalMemorySize&quot;);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>double</span><span class="space"> </span><span>totalMemory</span><span class="space"> </span><span>=</span><span class="space"> </span><span>1.0</span><span class="space"> </span><span>*</span><span class="space"> </span><span>totalPhysicalMemorySize</span><span class="space"> </span><span>/</span><span class="space"> </span><span>GB;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>double</span><span class="space"> </span><span>freeMemory</span><span class="space"> </span><span>=</span><span class="space"> </span><span>1.0</span><span class="space"> </span><span>*</span><span class="space"> </span><span>freePhysicalMemorySize</span><span class="space"> </span><span>/</span><span class="space"> </span><span>GB;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>double</span><span class="space"> </span><span>memoryUseRatio</span><span class="space"> </span><span>=</span><span class="space"> </span><span>1.0</span><span class="space"> </span><span>*</span><span class="space"> </span><span>(totalPhysicalMemorySize</span><span class="space"> </span><span>-</span><span class="space"> </span><span>freePhysicalMemorySize)</span><span class="space"> </span><span>/</span><span class="space"> </span><span>totalPhysicalMemorySize</span><span class="space"> </span><span>*</span><span class="space"> </span><span>100;</span></span>
<span class="line"><span></span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>StringBuilder</span><span class="space"> </span><span>result</span><span class="space"> </span><span>=</span><span class="space"> </span><span>new</span><span class="space"> </span><span>StringBuilder();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>result.append(&quot;系统CPU占用率:</span><span class="space"> </span><span>&quot;)</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>.append(twoDecimal(systemCpuLoad))</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>.append(&quot;%，内存占用率：&quot;)</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>.append(twoDecimal(memoryUseRatio))</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>.append(&quot;%，系统总内存：&quot;)</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>.append(twoDecimal(totalMemory))</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>.append(&quot;GB，系统剩余内存：&quot;)</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>.append(twoDecimal(freeMemory))</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>.append(&quot;GB，该进程占用CPU：&quot;)</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>.append(twoDecimal(processCpuLoad))</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>.append(&quot;%&quot;);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>System.out.println(result.toString());</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>public</span><span class="space"> </span><span>double</span><span class="space"> </span><span>twoDecimal(double</span><span class="space"> </span><span>doubleValue)</span><span class="space"> </span><span>{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>BigDecimal</span><span class="space"> </span><span>bigDecimal</span><span class="space"> </span><span>=</span><span class="space"> </span><span>new</span><span class="space"> </span><span>BigDecimal(doubleValue).setScale(2,</span><span class="space"> </span><span>RoundingMode.HALF_UP);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>return</span><span class="space"> </span><span>bigDecimal.doubleValue();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>}</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5)]))}const d=a(e,[["render",l],["__file","index.html.vue"]]),r=JSON.parse('{"path":"/article/ff4dhmgi/","title":"提高服务器CPU使用率小工具","lang":"zh-CN","frontmatter":{"title":"提高服务器CPU使用率小工具","createTime":"2025/07/23 17:23:17","permalink":"/article/ff4dhmgi/","tags":["工具"],"description":"如果CPU的使用率没有达到30%，则可以启动工具，使其占用率达到30% 添加依赖 实现代码","head":[["meta",{"property":"og:url","content":"https://blog.gaohan.asia/article/ff4dhmgi/"}],["meta",{"property":"og:site_name","content":"云泽汇码"}],["meta",{"property":"og:title","content":"提高服务器CPU使用率小工具"}],["meta",{"property":"og:description","content":"如果CPU的使用率没有达到30%，则可以启动工具，使其占用率达到30% 添加依赖 实现代码"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-07-29T01:29:41.000Z"}],["meta",{"property":"article:tag","content":"工具"}],["meta",{"property":"article:modified_time","content":"2025-07-29T01:29:41.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"提高服务器CPU使用率小工具\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-07-29T01:29:41.000Z\\",\\"author\\":[]}"]]},"headers":[],"readingTime":{"minutes":2.35,"words":704},"git":{"updatedTime":1753752581000,"contributors":[{"name":"yunze","username":"yunze","email":"834363368@qq.com","commits":1,"avatar":"https://avatars.githubusercontent.com/yunze?v=4","url":"https://github.com/yunze"}]},"autoDesc":true,"filePathRelative":"java/208.提高服务器CPU使用率小工具.md","categoryList":[{"id":"93f725","sort":10004,"name":"java"}]}');export{d as comp,r as data};
