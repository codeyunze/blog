import{_ as a,e,f as i,o as n}from"./app-Cx_oisp2.js";const p="/assets/image-20241021190735335-BOkQsx-o.png",l="/assets/image-20241021190750433-B_v1L3Iz.png",t="/assets/image-20241021190828756-DrlqUORB.png",c="/assets/image-20241021190925025-KC0KK8NP.png",h="/assets/image-20241021191010835-0NyZHjk1.png",d="/assets/image-20241021191150185-Dc4yppup.png",r="/assets/image-20241021191202321-aVnR18Rl.png",k="/assets/image-20241021191246957--idwHtrx.png",o="/assets/image-20241021192005889-BOwdkb5R.png",g="/assets/image-20241019152703306-zTlx_rDp.png",u="/assets/image-20241019152927309-BETRT6GV.png",m="/assets/image-20241028085058995-CVu72r0S.png",v={};function y(A,s){return n(),e("div",null,s[0]||(s[0]=[i('<p>Docker的安装与常用操作命令，常用中间件的docker模式部署步骤。</p><h1 id="docker安装与常用操作" tabindex="-1"><a class="header-anchor" href="#docker安装与常用操作"><span>Docker安装与常用操作</span></a></h1><h2 id="一、centos系统安装docker" tabindex="-1"><a class="header-anchor" href="#一、centos系统安装docker"><span>一、CentOS系统安装Docker</span></a></h2><h3 id="_1-准备docker所需环境" tabindex="-1"><a class="header-anchor" href="#_1-准备docker所需环境"><span>1.准备docker所需环境</span></a></h3><h5 id="执行命令清理相关环境-防止出现冲突" tabindex="-1"><a class="header-anchor" href="#执行命令清理相关环境-防止出现冲突"><span>执行命令清理相关环境，防止出现冲突</span></a></h5><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">yum</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">remove</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">docker</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">docker-client</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">docker-client-latest</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">docker-common</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">docker-latest</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">docker-latest-logrotate</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">docker-logrotate</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">docker-engine</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="'+p+'" alt="image-20241021190735335"></p><h5 id="安装yum-utils工具包" tabindex="-1"><a class="header-anchor" href="#安装yum-utils工具包"><span>安装yum-utils工具包</span></a></h5><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">yum</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">install</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-y</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">yum-utils</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="'+l+'" alt="image-20241021190750433"></p><h5 id="设置阿里的镜像" tabindex="-1"><a class="header-anchor" href="#设置阿里的镜像"><span>设置阿里的镜像</span></a></h5><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">yum-config-manager</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">--add-repo</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="'+t+'" alt="image-20241021190828756"></p><h3 id="_3-安装docker" tabindex="-1"><a class="header-anchor" href="#_3-安装docker"><span>3.安装docker</span></a></h3><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">yum</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">install</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">docker-ce</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">docker-ce-cli</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">containerd.io</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="'+c+'" alt="image-20241021190925025"></p><p><img src="'+h+'" alt="image-20241021191010835"></p><p><img src="'+d+'" alt="image-20241021191150185"></p><p><img src="'+r+'" alt="image-20241021191202321"></p><p>启动docker</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">systemctl</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">start</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">docker</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-验证docker" tabindex="-1"><a class="header-anchor" href="#_2-验证docker"><span>2.验证docker</span></a></h3><p>查看docker版本</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-v</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="'+k+`" alt="image-20241021191246957"></p><p>设置镜像源，推荐使用阿里的</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">tee</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/etc/docker/daemon.json</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;&lt;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">EFO</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">{</span></span>
<span class="line"><span class="tab">	</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&quot;registry-mirrors&quot;:</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">[</span></span>
<span class="line"><span class="tab">	</span><span class="tab">	</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&quot;https://xxxxxxx.mirror.aliyuncs.com&quot;</span></span>
<span class="line"><span class="tab">	</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">}</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">EFO</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+o+`" alt="image-20241021192005889"></p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">加载新配置信息</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">systemctl</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">daemon-reload</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">重启docker</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">systemctl</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">restart</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">docker</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>docker 切换镜像</p><p>[可用] https://www.cnblogs.com/xietingfeng321/p/18451170</p><h2 id="二、docker常用操作" tabindex="-1"><a class="header-anchor" href="#二、docker常用操作"><span>二、Docker常用操作</span></a></h2><p>docker 安装redis</p><ol><li><p>拉取redis镜像</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span class="space"> </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">pull</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">redis:latest</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>查看本地镜像</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span class="space"> </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">images</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>运行容器</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">run</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-itd</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">--name</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">redis-dev</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-p</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">6379:6379</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">redis</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">--requirepass</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">foobared</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>查看运行中的容器</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ps</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>进入容器空间操作</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">exec</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-it</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">redis-dev</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/bin/bash</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>关闭运行中的容器</p><p>先使用命令 <code>docker ps</code> 查看处于运行中的容器</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">yunze@yunzedeMacBook-Pro</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">~</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">%</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">docker</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ps</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">CONTAINER</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ID</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">IMAGE</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">COMMAND</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">CREATED</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">STATUS</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">PORTS</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">NAMES</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">039e8dbc0fed</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">redis</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">docker-entrypoint.s…</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">40</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">hours</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ago</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Up</span><span class="space"> </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">40</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">hours</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0.0.0.0:6379</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">6379/tcp</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">redis-dev</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后根据运行中容器的 <code>CONTAINER ID</code> 去关闭容器</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">yunze@yunzedeMacBook-Pro</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">~</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">%</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">docker</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">stop</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">039e8dbc0fed</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">039e8dbc0fed</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>删除容器</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">rm</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">039e8dbc0fed</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">(容器ID，CONTAINER</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">ID)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>删除镜像</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">rmi</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[IMAGE</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ID]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>运行rabbitmq镜像</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">run</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-d</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">--name=rabbitmq</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-v</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/usr/local/docker/rabbitmq:/var/lib/rabbitmq</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-p</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">15672:15672</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-p</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">5672:5672</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-e</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">RABBITMQ_DEFAULT_USER=admin</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-e</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">RABBITMQ_DEFAULT_PASS=admin</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">rabbitmq:management</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>查询中间件镜像的具体版本</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">image</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">inspect</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">redis:latest</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">|</span><span class="space"> </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">grep</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-i</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">version</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ol><h2 id="三、镜像导入导出" tabindex="-1"><a class="header-anchor" href="#三、镜像导入导出"><span>三、镜像导入导出</span></a></h2><h3 id="将镜像保存为tar文件" tabindex="-1"><a class="header-anchor" href="#将镜像保存为tar文件"><span>将镜像保存为tar文件</span></a></h3><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">save</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">[IMAGE</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ID]</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nacos-2.3.2.tar</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="将tar文件载入docker" tabindex="-1"><a class="header-anchor" href="#将tar文件载入docker"><span>将tar文件载入docker</span></a></h3><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">load</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nacos-2.3.2.tar</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="修改镜像的名称和tag版本" tabindex="-1"><a class="header-anchor" href="#修改镜像的名称和tag版本"><span>修改镜像的名称和TAG版本</span></a></h3><p>构建一个镜像之后，发现镜像的名称和TAG为none</p><p><img src="`+g+`" alt="image-20241019152703306"></p><p>修改方式</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">docker</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">tag</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">[IMAGE</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">ID]</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">[新的REPOSITORY]:[新的TAG]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">tag</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">d3063c1db2bb</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nacos/nacos-server:v2.3.2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+u+'" alt="image-20241019152927309"></p><h2 id="四、同一镜像多个系统架构版本解决方案" tabindex="-1"><a class="header-anchor" href="#四、同一镜像多个系统架构版本解决方案"><span>四、同一镜像多个系统架构版本解决方案</span></a></h2><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">manifest</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">create</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">registry.cn-hangzhou.aliyuncs.com/yunze_images_space/seata-server:latest</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">registry.cn-hangzhou.aliyuncs.com/yunze_images_space/seata-server:arm64</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">registry.cn-hangzhou.aliyuncs.com/yunze_images_space/seata-server:x64</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">manifest</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">push</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">registry.cn-hangzhou.aliyuncs.com/yunze_images_space/seata-server:latest</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&amp;&amp;</span><span class="space"> </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">manifest</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">rm</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">registry.cn-hangzhou.aliyuncs.com/yunze_images_space/seata-server:latest</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">pull</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">--platform=linux/amd64</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">registry.cn-hangzhou.aliyuncs.com/yunze_images_space/seata-server:latest</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="五、安装docker-compose" tabindex="-1"><a class="header-anchor" href="#五、安装docker-compose"><span>五、安装docker-compose</span></a></h2><p>下载docker-compose的安装包</p><p>（可以去挑选合适自己的版本 https://github.com/docker/compose/releases）</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">wget</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://github.com/docker/compose/releases/download/v2.29.7/docker-compose-linux-x86_64</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>将安装包重命名为 <strong>docker-compose</strong> ，并将其移动到 <strong>/usr/local/bin/</strong> 目录下</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mv</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">docker-compose-linux-x86_64</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/usr/local/bin/docker-compose</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>授予其可执行权限</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">chmod</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">+x</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/usr/local/bin/docker-compose</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>验证 <strong>docker-compose</strong></p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker-compose</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">--version</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="'+m+'" alt="image-20241028085058995"></p>',60)]))}const D=a(v,[["render",y],["__file","index.html.vue"]]),B=JSON.parse('{"path":"/other/4pm7bdvr/","title":"Docker安装与常用操作","lang":"zh-CN","frontmatter":{"title":"Docker安装与常用操作","createTime":"2024/10/06 11:39:45","permalink":"/other/4pm7bdvr/","tags":["手册","docker"],"description":"Docker的安装与常用操作命令，常用中间件的docker模式部署步骤。 Docker安装与常用操作 一、CentOS系统安装Docker 1.准备docker所需环境 执行命令清理相关环境，防止出现冲突 image-20241021190735335 安装yum-utils工具包 image-20241021190750433 设置阿里的镜像 ima...","head":[["meta",{"property":"og:url","content":"https://blog.gaohan.asia/other/4pm7bdvr/"}],["meta",{"property":"og:site_name","content":"云泽汇码"}],["meta",{"property":"og:title","content":"Docker安装与常用操作"}],["meta",{"property":"og:description","content":"Docker的安装与常用操作命令，常用中间件的docker模式部署步骤。 Docker安装与常用操作 一、CentOS系统安装Docker 1.准备docker所需环境 执行命令清理相关环境，防止出现冲突 image-20241021190735335 安装yum-utils工具包 image-20241021190750433 设置阿里的镜像 ima..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-03-09T10:39:32.000Z"}],["meta",{"property":"article:tag","content":"手册"}],["meta",{"property":"article:tag","content":"docker"}],["meta",{"property":"article:modified_time","content":"2025-03-09T10:39:32.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Docker安装与常用操作\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-03-09T10:39:32.000Z\\",\\"author\\":[]}"]]},"headers":[],"readingTime":{"minutes":2.42,"words":725},"git":{"updatedTime":1741516772000,"contributors":[{"name":"yunze","username":"yunze","email":"56632502+YUNZE-GH@users.noreply.github.com","commits":6,"avatar":"https://avatars.githubusercontent.com/yunze?v=4","url":"https://github.com/yunze"},{"name":"yunze","username":"yunze","email":"834363368@qq.com","commits":1,"avatar":"https://avatars.githubusercontent.com/yunze?v=4","url":"https://github.com/yunze"}]},"autoDesc":true,"filePathRelative":"manual/321.Docker安装与常用操作.md","categoryList":[{"id":"3c78b3","sort":10003,"name":"manual"}]}');export{D as comp,B as data};
