import{_ as a,e as i,f as n,o as p}from"./app-Cx_oisp2.js";const e={};function t(l,s){return p(),i("div",null,s[0]||(s[0]=[n(`<p>Caffeine 是一个高性能的本地缓存组件（Java 编写的），基于 Google 的 <strong>Guava Cache</strong> 改进而来，它相比直接使用静态 <code>HashMap</code> 来做本地缓存有非常显著的优势。下面从多个维度来对比两者：</p><table><thead><tr><th>特性</th><th>静态 HashMap</th><th>Caffeine</th></tr></thead><tbody><tr><td>线程安全</td><td>不支持（需手动处理）</td><td>支持</td></tr><tr><td>自动过期</td><td>不支持</td><td>支持</td></tr><tr><td>大小控制</td><td>不支持</td><td>支持（自动淘汰）</td></tr><tr><td>异步加载/刷新</td><td>不支持</td><td>支持</td></tr><tr><td>统计监控</td><td>不支持</td><td>支持</td></tr><tr><td>性能</td><td>中等</td><td>高（W-TinyLFU）</td></tr><tr><td>易用性</td><td>简单但原始</td><td>功能丰富、API友好</td></tr></tbody></table><h2 id="_1-自动过期机制" tabindex="-1"><a class="header-anchor" href="#_1-自动过期机制"><span>1. <strong>自动过期机制</strong></span></a></h2><h3 id="【不支持】-静态-hashmap" tabindex="-1"><a class="header-anchor" href="#【不支持】-静态-hashmap"><span>【不支持】 静态 HashMap：</span></a></h3><ul><li>不支持自动过期。</li><li>需要手动维护过期时间，例如额外用定时任务清理。</li></ul><h3 id="【支持】caffeine" tabindex="-1"><a class="header-anchor" href="#【支持】caffeine"><span>【支持】Caffeine：</span></a></h3><ul><li>提供灵活的过期策略： <ul><li>基于写入后过期（<code>expireAfterWrite</code>）</li><li>基于访问后过期（<code>expireAfterAccess</code>）</li></ul></li><li>示例：</li></ul><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Cache</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">cache</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Caffeine</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">newBuilder</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">expireAfterWrite</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">10</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">TimeUnit</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">MINUTES</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">build</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="_2-大小限制与淘汰策略" tabindex="-1"><a class="header-anchor" href="#_2-大小限制与淘汰策略"><span>2. <strong>大小限制与淘汰策略</strong></span></a></h2><h3 id="【不支持】静态-hashmap" tabindex="-1"><a class="header-anchor" href="#【不支持】静态-hashmap"><span>【不支持】静态 HashMap：</span></a></h3><ul><li>没有大小限制，容易造成内存溢出（OOM）。</li><li>需要手动管理缓存大小和清理逻辑。</li></ul><h3 id="【支持】caffeine-1" tabindex="-1"><a class="header-anchor" href="#【支持】caffeine-1"><span>【支持】Caffeine：</span></a></h3><ul><li>支持设置最大条目数或最大权重，并自动进行淘汰：</li></ul><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Cache</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">cache</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Caffeine</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">newBuilder</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">maximumSize</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">100</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">build</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>使用 <strong>基于窗口的最小频率使用算法（W-TinyLFU）</strong>，性能高且命中率好。</li></ul><hr><h2 id="_3-线程安全" tabindex="-1"><a class="header-anchor" href="#_3-线程安全"><span>3. <strong>线程安全</strong></span></a></h2><h3 id="【不支持】静态-hashmap-1" tabindex="-1"><a class="header-anchor" href="#【不支持】静态-hashmap-1"><span>【不支持】静态 HashMap：</span></a></h3><ul><li>不是线程安全的，多线程下需要自己加锁或者使用 <code>Collections.synchronizedMap()</code>，效率低。</li></ul><h3 id="【支持】caffeine-2" tabindex="-1"><a class="header-anchor" href="#【支持】caffeine-2"><span>【支持】Caffeine：</span></a></h3><ul><li>默认就是线程安全的，底层使用 <code>ConcurrentHashMap</code> 实现，适合并发场景。</li></ul><hr><h2 id="_4-异步加载与刷新机制" tabindex="-1"><a class="header-anchor" href="#_4-异步加载与刷新机制"><span>4. <strong>异步加载与刷新机制</strong></span></a></h2><h3 id="【不支持】静态-hashmap-2" tabindex="-1"><a class="header-anchor" href="#【不支持】静态-hashmap-2"><span>【不支持】静态 HashMap：</span></a></h3><ul><li>无法实现异步加载数据或自动刷新缓存。</li></ul><h3 id="【支持】caffeine-3" tabindex="-1"><a class="header-anchor" href="#【支持】caffeine-3"><span>【支持】Caffeine：</span></a></h3><ul><li>支持异步加载（<code>AsyncLoadingCache</code>）和定期刷新（<code>refreshAfterWrite</code>）：</li></ul><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">LoadingCache</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">Key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">Graph</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">graphs</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Caffeine</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">newBuilder</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">refreshAfterWrite</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">TimeUnit</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">DAYS</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">build</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">key</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">-&gt;</span><span class="space"> </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">createExpensiveGraph</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">));</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="_5-统计监控功能" tabindex="-1"><a class="header-anchor" href="#_5-统计监控功能"><span>5. <strong>统计监控功能</strong></span></a></h2><h3 id="【不支持】静态-hashmap-3" tabindex="-1"><a class="header-anchor" href="#【不支持】静态-hashmap-3"><span>【不支持】静态 HashMap：</span></a></h3><ul><li>无任何内置统计信息。</li></ul><h3 id="【支持】caffeine-4" tabindex="-1"><a class="header-anchor" href="#【支持】caffeine-4"><span>【支持】Caffeine：</span></a></h3><ul><li>可以开启统计功能，获取缓存命中率、加载次数等指标，便于优化缓存策略：</li></ul><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Caffeine</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">newBuilder</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">().</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">recordStats</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">().</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">build</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h2 id="_6-更丰富的-api-和可扩展性" tabindex="-1"><a class="header-anchor" href="#_6-更丰富的-api-和可扩展性"><span>6. <strong>更丰富的 API 和可扩展性</strong></span></a></h2><ul><li>Caffeine 提供了更丰富的 API，比如： <ul><li>监听器（监听缓存的插入、删除事件）</li><li>自定义权重计算</li><li>支持弱引用（weak keys / soft values）</li></ul></li></ul><hr><h2 id="性能对比总结" tabindex="-1"><a class="header-anchor" href="#性能对比总结"><span>性能对比总结</span></a></h2><table><thead><tr><th>特性</th><th>静态 HashMap</th><th>Caffeine</th></tr></thead><tbody><tr><td>线程安全</td><td>不支持（需手动处理）</td><td>支持</td></tr><tr><td>自动过期</td><td>不支持</td><td>支持</td></tr><tr><td>大小控制</td><td>不支持</td><td>支持（自动淘汰）</td></tr><tr><td>异步加载/刷新</td><td>不支持</td><td>支持</td></tr><tr><td>统计监控</td><td>不支持</td><td>支持</td></tr><tr><td>性能</td><td>中等</td><td>高（W-TinyLFU）</td></tr><tr><td>易用性</td><td>简单但原始</td><td>功能丰富、API友好</td></tr></tbody></table><hr><h2 id="使用建议" tabindex="-1"><a class="header-anchor" href="#使用建议"><span>使用建议</span></a></h2><table><thead><tr><th>场景</th><th>推荐使用</th></tr></thead><tbody><tr><td>小型项目、临时缓存</td><td>可以使用静态 HashMap</td></tr><tr><td>需要缓存过期、大小控制、线程安全、性能优化</td><td>使用 Caffeine</td></tr><tr><td>需要分布式缓存</td><td>考虑 Redis、Ehcache、Caffeine + Spring Cache 结合使用</td></tr></tbody></table><hr><h2 id="示例代码对比" tabindex="-1"><a class="header-anchor" href="#示例代码对比"><span>示例代码对比</span></a></h2><h3 id="使用-hashmap" tabindex="-1"><a class="header-anchor" href="#使用-hashmap"><span>使用 HashMap：</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">class</span><span class="space"> </span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">SimpleCache</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">private</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">static</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">final</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Map</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">cache</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">new</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">HashMap</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;&gt;();</span></span>
<span class="line"></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">static</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">void</span><span class="space"> </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">put</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">String</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">String</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">value</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">cache</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">put</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">value</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">static</span><span class="space"> </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">String</span><span class="space"> </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">get</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">String</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">return</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">cache</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">get</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="使用-caffeine" tabindex="-1"><a class="header-anchor" href="#使用-caffeine"><span>使用 Caffeine：</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Cache</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">cache</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Caffeine</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">newBuilder</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">maximumSize</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">100</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">expireAfterWrite</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">10</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">TimeUnit</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">MINUTES</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">build</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">cache</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">put</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">key</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">value</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">String</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">value</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">cache</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getIfPresent</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">key</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="总结一句话" tabindex="-1"><a class="header-anchor" href="#总结一句话"><span>总结一句话：</span></a></h2><blockquote><p><strong>Caffeine 是为现代应用设计的“智能缓存”，而 HashMap 只是一个基础的数据结构容器。在大多数需要缓存的场景中，都应该优先选择 Caffeine 或其他专业缓存库。</strong></p></blockquote><p>如果你正在开发一个中大型 Java 应用，尤其是 Spring Boot 项目，推荐结合 <code>Spring Cache</code> + <code>Caffeine</code> 使用，可以更加优雅地集成缓存功能。</p><p>如需我提供 Spring Boot 整合 Caffeine 的示例，也可以继续提问！</p>`,56)]))}const k=a(e,[["render",t],["__file","index.html.vue"]]),d=JSON.parse('{"path":"/article/e9c9b6cy/","title":"Caffeine和HashMap的比对","lang":"zh-CN","frontmatter":{"title":"Caffeine和HashMap的比对","createTime":"2025/07/14 00:17:00","permalink":"/article/e9c9b6cy/","tags":["手册","json"],"description":"Caffeine 是一个高性能的本地缓存组件（Java 编写的），基于 Google 的 Guava Cache 改进而来，它相比直接使用静态 HashMap 来做本地缓存有非常显著的优势。下面从多个维度来对比两者： 1. 自动过期机制 【不支持】 静态 HashMap： 不支持自动过期。 需要手动维护过期时间，例如额外用定时任务清理。 【支持】Caf...","head":[["meta",{"property":"og:url","content":"https://blog.gaohan.asia/article/e9c9b6cy/"}],["meta",{"property":"og:site_name","content":"云泽汇码"}],["meta",{"property":"og:title","content":"Caffeine和HashMap的比对"}],["meta",{"property":"og:description","content":"Caffeine 是一个高性能的本地缓存组件（Java 编写的），基于 Google 的 Guava Cache 改进而来，它相比直接使用静态 HashMap 来做本地缓存有非常显著的优势。下面从多个维度来对比两者： 1. 自动过期机制 【不支持】 静态 HashMap： 不支持自动过期。 需要手动维护过期时间，例如额外用定时任务清理。 【支持】Caf..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-07-29T01:29:41.000Z"}],["meta",{"property":"article:tag","content":"手册"}],["meta",{"property":"article:tag","content":"json"}],["meta",{"property":"article:modified_time","content":"2025-07-29T01:29:41.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Caffeine和HashMap的比对\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-07-29T01:29:41.000Z\\",\\"author\\":[]}"]]},"headers":[],"readingTime":{"minutes":3.11,"words":933},"git":{"updatedTime":1753752581000,"contributors":[{"name":"yunze","username":"yunze","email":"834363368@qq.com","commits":2,"avatar":"https://avatars.githubusercontent.com/yunze?v=4","url":"https://github.com/yunze"}]},"autoDesc":true,"filePathRelative":"java/259.Caffeine和HashMap的比对.md","categoryList":[{"id":"93f725","sort":10004,"name":"java"}]}');export{k as comp,d as data};
