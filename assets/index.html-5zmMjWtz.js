import{_ as l,e as t,g as a,f as c,h as i,i as p,j as e,r,o as h}from"./app-Cx_oisp2.js";const k="/assets/image-20250709114313563-CCuRXumx.png",d="/assets/image-20250709114645042-CpXpTr4G.png",o="/assets/image-20250709145908106-DY4UrYjt.png",g="/assets/image-20250709153119742-P9-E0qc9.png",m="/assets/image-20250709224322775-DfF2j2lR.png",y="/assets/image-20250709224921615-9m_O29-3.png",u="/assets/image-20250709224947237-BDKR7GsS.png",v="/assets/image-20250709225107807-C1NdG2-f.png",A={};function B(b,s){const n=r("RouteLink");return h(),t("div",null,[s[8]||(s[8]=a("p",null,"在已经部署配置好Grafana+Prometheus的基础上进行redis-exporter的部署，以实现redis实例接入Grafana+Prometheus监控体系。",-1)),s[9]||(s[9]=a("h2",{id:"准备工作",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#准备工作"},[a("span",null,"准备工作")])],-1)),a("p",null,[s[2]||(s[2]=i("前置文章《 ")),p(n,{to:"/manual/343.%E8%87%AA%E5%8A%A8%E5%8C%96%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2.html"},{default:e(()=>s[0]||(s[0]=[i("自动化性能监控系统安装部署")])),_:1}),s[3]||(s[3]=i(" 》《 ")),p(n,{to:"/manual/322.Docker%E6%97%A0%E6%B3%95%E6%8B%89%E5%8F%96%E9%95%9C%E5%83%8F%E6%96%87%E4%BB%B6%E8%A7%A3%E5%86%B3.html"},{default:e(()=>s[1]||(s[1]=[i("Docker无法拉取镜像文件解决")])),_:1}),s[4]||(s[4]=i(" 》"))]),s[10]||(s[10]=a("p",null,"准备好reids-exporter的镜像，本文使用的是oliver006/redis_exporter:v1.64.1。",-1)),s[11]||(s[11]=a("p",null,[a("img",{src:k,alt:"image-20250709114313563"})],-1)),s[12]||(s[12]=a("p",null,"Docker Hub无法访问的可以下载Steam++，官网地址https://steampp.net/",-1)),s[13]||(s[13]=a("p",null,[a("img",{src:d,alt:"image-20250709114645042"})],-1)),s[14]||(s[14]=a("p",null,"开始加速之后就可以访问了Docker Hub和GitHub了。",-1)),a("p",null,[s[6]||(s[6]=i("将镜像上传到自己的阿里云镜像仓库（操作方式在《 ")),p(n,{to:"/manual/322.Docker%E6%97%A0%E6%B3%95%E6%8B%89%E5%8F%96%E9%95%9C%E5%83%8F%E6%96%87%E4%BB%B6%E8%A7%A3%E5%86%B3.html"},{default:e(()=>s[5]||(s[5]=[i("Docker无法拉取镜像文件解决")])),_:1}),s[7]||(s[7]=i(" 》里有详细说明）"))]),s[15]||(s[15]=c(`<h2 id="部署-redis-exporter-数据抓取工具" tabindex="-1"><a class="header-anchor" href="#部署-redis-exporter-数据抓取工具"><span>部署 redis-exporter 数据抓取工具</span></a></h2><p>然后调整docker的编排脚本docker-compose.yml，在里面添加下面配置中的 <code>redis-exporter-aliyun</code> 部分。</p><div class="language-yaml line-numbers-mode" data-ext="yaml" data-title="yaml"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">services</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">redis</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">image</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">registry.cn-guangzhou.aliyuncs.com/devyunze/redis:6.2.16</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">container_name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">redis</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">command</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">--requirepass</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&quot;1234567&quot;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">ports</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">-</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">6379:6379</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span></span>
<span class="line"><span class="tab">	</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">redis-exporter-aliyun</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">image</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">registry.cn-guangzhou.aliyuncs.com/devyunze/redis_exporter:v1.64.1</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">container_name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">redis-exporter-aliyun</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">environment</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">-</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">REDIS_ADDR=redis://192.168.0.10:6379</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">-</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">REDIS_PASSWORD=1234567</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">volumes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">-</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/etc/localtime:/etc/localtime</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">ports</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">-</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">9121:9121</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用命令创建并启动redis-exporter-aliyun容器</p><blockquote><p>注意：需要在docker-compose.yml同级目录下执行如下命令</p></blockquote><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker-compose</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">up</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-d</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">redis-exporter-aliyun</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="调整普罗米修斯配置获取redis-exporter抓取数据" tabindex="-1"><a class="header-anchor" href="#调整普罗米修斯配置获取redis-exporter抓取数据"><span>调整普罗米修斯配置获取redis-exporter抓取数据</span></a></h2><p>调整普罗米修斯Prometheus的配置文件prometheus.yml，添加job_name为 <code>redis-signle-aliyun</code> 的配置。</p><div class="language-yaml line-numbers-mode" data-ext="yaml" data-title="yaml"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">global</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">scrape_interval</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">15s</span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">数据抓取间隔</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">scrape_configs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">-</span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">job_name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">prometheus</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">static_configs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">-</span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">targets</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">localhost:9090</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">-</span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">job_name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">redis-signle-aliyun</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">static_configs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">-</span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">targets</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">192.168.0.10:9121</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">labels</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">instance</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">redis-signle-aliyun</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>让Prometheus重新加载配置文件</p><p>前往Prometheus的编排文件所在地方</p><p><img src="`+o+'" alt="image-20250709145908106"></p><p>执行命令</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker-compose</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">kill</span><span class="space"> </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">-s</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">SIGHUP</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">prometheus</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>或执行重启命令（两个命令都可以，执行一个即可）</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker-compose</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">restart</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">prometheus</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>访问Prometheus，看到redis的状态为state即可。</p><p><img src="'+g+'" alt="image-20250709153119742"></p><h2 id="配置grafana可视化监控界面" tabindex="-1"><a class="header-anchor" href="#配置grafana可视化监控界面"><span>配置Grafana可视化监控界面</span></a></h2><p>登录Grafana，去配置redis的可视化脚本</p><p><img src="'+m+'" alt="image-20250709224322775"></p><p><img src="'+y+'" alt="image-20250709224921615"></p><p>redis的dashboard可视化界面的json文件 <a href="/json/redis-dashboard.json" target="_blank">下载链接</a></p><p>然后数据源选择配置好的Prometheus。</p><p><img src="'+u+'" alt="image-20250709224947237"></p><p>最后就可以在Dashboard菜单里看到redis的监控信息了。</p><p><img src="'+v+'" alt="image-20250709225107807"></p>',27))])}const C=l(A,[["render",B],["__file","index.html.vue"]]),E=JSON.parse('{"path":"/article/1ffy3v7g/","title":"Docker部署redis_exporter","lang":"zh-CN","frontmatter":{"title":"Docker部署redis_exporter","createTime":"2025/07/12 10:41:09","permalink":"/article/1ffy3v7g/","tags":["手册","docker"],"description":"在已经部署配置好Grafana+Prometheus的基础上进行redis-exporter的部署，以实现redis实例接入Grafana+Prometheus监控体系。 准备工作 前置文章《 》《 》 准备好reids-exporter的镜像，本文使用的是oliver006/redis_exporter:v1.64.1。 image-20250709...","head":[["meta",{"property":"og:url","content":"https://blog.gaohan.asia/article/1ffy3v7g/"}],["meta",{"property":"og:site_name","content":"云泽汇码"}],["meta",{"property":"og:title","content":"Docker部署redis_exporter"}],["meta",{"property":"og:description","content":"在已经部署配置好Grafana+Prometheus的基础上进行redis-exporter的部署，以实现redis实例接入Grafana+Prometheus监控体系。 准备工作 前置文章《 》《 》 准备好reids-exporter的镜像，本文使用的是oliver006/redis_exporter:v1.64.1。 image-20250709..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2026-02-12T02:07:17.000Z"}],["meta",{"property":"article:tag","content":"手册"}],["meta",{"property":"article:tag","content":"docker"}],["meta",{"property":"article:modified_time","content":"2026-02-12T02:07:17.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Docker部署redis_exporter\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2026-02-12T02:07:17.000Z\\",\\"author\\":[]}"]]},"headers":[],"readingTime":{"minutes":1.93,"words":580},"git":{"updatedTime":1770862037000,"contributors":[{"name":"yunze","username":"yunze","email":"834363368@qq.com","commits":4,"avatar":"https://avatars.githubusercontent.com/yunze?v=4","url":"https://github.com/yunze"}]},"autoDesc":true,"filePathRelative":"manual/345.Docker部署redis_exporter.md","categoryList":[{"id":"3c78b3","sort":10003,"name":"manual"}]}');export{C as comp,E as data};
