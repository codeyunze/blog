---
title: 说一说MySQL的执行流程
createTime: 2025/10/26 19:59:52
permalink: /article/2z7s2g4f/
tags:
  - 每日一问
  - 数据库
---

连接器 --> 分析器 --> 优化器 --> 执行器 --> innodb存储引擎

查询数据到bufferpool --> 记录undolog日志 --> 更新bufferpool数据 --> redolog日志（prepare状态）--> binlog日志 --> redolog日志（commit状态）--> 刷盘（持久化）

<!-- more -->

------

mysql的执行流程可以分为两部分，一部分是Server层，一部分是存储引擎层。

Server层的流程是先到连接器验证访问权限，创建连接，然后到分析器里校验语法等关键字的正确性，再到优化器里主要选择合适的索引等操作，最后到执行器里调用存储引擎层。

存储引擎层，如果是`innodb`存储引擎，则是先将需要操作的数据所在数据页从idb磁盘文件里读取到`BufferPool缓存池`的**数据页**里。

再记录更新操作到undolog日志里后，再更新BufferPool缓存池里的数据，再将日志记录到redolog日志里，并标记为prepare状态，然后再将整个事务的操作记录binlog日志，并刷盘，之后再将redolog日志里的prepare状态修改为commit状态（此为两阶段提交）。

最后系统会以数据页为单位将BufferPool里更新的数据写入磁盘，进行持久化。

详细介绍可查看《  [MySQL架构的理解分析](../notes/interview/1.MySQL/1.MySQL架构的理解分析.md)  》