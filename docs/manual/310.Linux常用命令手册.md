---
title: Linux常用命令手册
createTime: 2025/08/26 23:09:55
permalink: /article/h7o5i6v4/
tags:
  - 手册
  - linux
---

介绍Linux常用的网络、权限、资源、文件相关操作命令。

<!-- more -->

## 一、基础网络命令

### 查看 IP
```bash
hostname -I
```

### 查看网卡信息
```bash
ifconfig
```
未安装时需要先安装工具包：
```bash
sudo apt install net-tools
```

### 测试网络连通性
```bash
ping <对端IP>
```

### 测试端口连通性
```bash
telnet <对端IP> <端口号>
```

### 查看占用端口
```bash
netstat -lntup
```

### 显示访问网站详细过程
```bash
curl -v www.baidu.com
```

### 获取 HTTP 头部信息
```bash
curl -I www.baidu.com
```



## 二、查看资源命令

### 查看内存使用

```bash
free -h
```

### 查看硬盘空间
```bash
df -h
```
> WSL 下的文件默认存放在 C 盘，实际大小是 C 盘的空间。

### 实时显示资源占用状态
```bash
top
```
- 1/5/15 分钟下的系统平均负载，根据 CPU 核心决定上限。
- `total` - 总进程数，`running` - 运行中的进程，`sleeping` - 休眠中的进程，`stopped` - 停止的进程，`zombie` - 僵尸进程。
- `us` 用户占用，`sy` 系统占用，`id` 空闲 CPU，`wa` IO 等待。
- `%CPU` 超过 100 是正常现象（多线程）。

### 查看 CPU 状态
```bash
mpstat
```

### 查看磁盘 IO 状态
```bash
iostat -d -x
```

### 查看占用 IO 的进程
```bash
sudo pidstat -d
```
- `kB_rd/s`：每秒读取数据量（KB）
- `kB_wr/s`：每秒写入数据量（KB）

### 查看系统进程
```bash
ps -ef
```
或
```bash
ps -aux
```

### 终止进程
```bash
kill <pid>
```

### 查看进程所在目录
```bash
sudo pwdx <pid>
```



## 三、基础文件权限命令

### 查看目录详细信息

```bash
ll -d /opt
```
- `d` = 目录，`-` = 普通文件，`l` = 符号链接，`c` = 字符设备，`b` = 设备等。
- `rwxr-xr-x`：权限说明（用户/组/其他）
- `2`：硬链接数
- `root`：所属用户和组
- `4096`：文件系统块大小（文件夹通常固定显示 4096）

### 修改文件权限
```bash
sudo chmod 757 /opt
```
- `-R` 参数表示递归修改。

### 修改文件所属用户和组
```bash
sudo chown <用户名>.<用户组> /opt
```
- `-R` 参数表示递归修改。



## 四、基础文件操作命令

### 复制文件

```bash
cp -r /etc/passwd /opt/
```

### 重命名文件
```bash
mv /opt/passwd /opt/2.txt
```

### 查看文件内容
```bash
cat /opt/1.txt
```

### 显示前/后几行
```bash
head -n3 /opt/1.txt
tail -n3 /opt/1.txt
```

### 实时跟踪文件
```bash
tail -f /opt/1.txt
```

### 统计行数
```bash
wc -l /opt/1.txt
```

### 过滤内容
```bash
grep -n root /opt/1.txt          # 显示包含 root 的行（带行号）
grep -n -v root /opt/1.txt       # 显示不包含 root 的行
grep -n -i ROOT /opt/1.txt       # 忽略大小写匹配
```

### 使用 awk 分列提取
```bash
awk -F: '{print $1}' /opt/1.txt                   # 以冒号分列，提取第一列
awk -F: 'NR==5{print $1}' /opt/1.txt              # 提取第五行第一列
awk -F: 'NR>=2&&NR<=5{print $1,$3}' /opt/1.txt    # 提取第2-5行的第1、3列
```

### 使用 sed 处理文本
```bash
sed -i '/sync/d' /opt/1.txt               # 删除包含 sync 的行（修改源文件）
sed -n '/sync/p' /opt/1.txt               # 显示包含 sync 的行
sed -i 's/root/reet/' /opt/1.txt          # 替换第一个 root 为 reet
sed -i 's/root/reet/g' /opt/1.txt         # 替换所有 root 为 reet
```

### 管道符使用
```bash
cat /opt/1.txt | grep /bin/bash           # 过滤包含 /bin/bash 的行
cat /opt/1.txt | grep /bin/bash | wc -l   # 统计包含 /bin/bash 的行数
ll /opt/1.txt | awk '{print $1}'          # 提取文件权限
netstat -anp | grep 5000                  # 查看 5000 端口监听状态
```

### 文件对比
```bash
diff /opt/1.txt /opt/2.txt
```

### MD5 校验
```bash
md5sum /opt/1.txt
```

### 使用 scp 发送文件
```bash
scp -r /opt/1.txt <用户>@<IP>:<存放路径>
```

### 使用 ssh 远程登录
```bash
ssh <用户>@<IP>
```

### 使用 rsync 同步文件
```bash
rsync -av /home/akalin/k3s /opt/                 # 本地同步
rsync -avz -e 'ssh -p 22' <目录> <用户>@<IP>:<目标目录>  # 远程同步
```

### 搜索文件
```bash
sudo find <目录> -name <文件名>                  # 按文件名搜索
sudo find <目录> -mtime +7                      # 搜索七天前的文件
sudo find <目录> -type f                         # 搜索文件
sudo find <目录> -type d                         # 搜索文件夹
sudo find <目录> -size +200k                     # 搜索大于 200KB 的文件
sudo find <目录> -size -200k                     # 搜索小于 200KB 的文件
```

### 结合 find 与 ls
```bash
sudo ls -lh `find /opt -name *.txt`
find /opt -name *.txt | xargs ls -lh
find /opt -name *.txt -exec ls -lh {} \;
```

### 使用 vim 编辑文件
```bash
vim /opt/1.txt
```
- 按 `i` 或 `o` 进入编辑模式。
- 按 `ESC` 退出编辑模式。
- 退出后使用 `:wq` 保存退出，`:q!` 不保存退出。
- `/要查找的内容` 查找文本，按 `N` 下一个。
- `:set number` 显示行号。

### 常用 vim 快捷键
- `gg`：回到第一行
- `Shift + G`：回到最后一行
- `dd`：删除当前行
- `u`：撤销
- `Home`：回到行首
- `End`：回到行尾

### 打包与解包
```bash
tar -cvf <文件名.tar> <文件或文件夹>     # 打包
tar -xvf <包名.tar>                     # 解包
tar -zcvf <文件名.tar.gz> <文件或文件夹> # 打包并压缩
tar -xvf <包名.tar.gz>                  # 解压
```
